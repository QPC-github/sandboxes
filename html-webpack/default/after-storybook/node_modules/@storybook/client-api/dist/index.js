var ar=Object.create;var R=Object.defineProperty;var sr=Object.getOwnPropertyDescriptor;var nr=Object.getOwnPropertyNames;var ir=Object.getPrototypeOf,dr=Object.prototype.hasOwnProperty;var cr=(t,r)=>{for(var e in r)R(t,e,{get:r[e],enumerable:!0})},P=(t,r,e,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of nr(r))!dr.call(t,s)&&s!==e&&R(t,s,{get:()=>r[s],enumerable:!(i=sr(r,s))||i.enumerable});return t},F=(t,r,e)=>(P(t,r,"default"),e&&P(e,r,"default")),T=(t,r,e)=>(e=t!=null?ar(ir(t)):{},P(r||!t||!t.__esModule?R(e,"default",{value:t,enumerable:!0}):e,t)),pr=t=>P(R({},"__esModule",{value:!0}),t);var b={};cr(b,{ClientApi:()=>C,addArgTypes:()=>J,addArgTypesEnhancer:()=>X,addArgs:()=>H,addArgsEnhancer:()=>q,addDecorator:()=>U,addLoader:()=>B,addParameters:()=>W,addStepRunner:()=>Z,getQueryParam:()=>lr,getQueryParams:()=>or,setGlobalRender:()=>rr});module.exports=pr(b);var v=T(require("util-deprecate")),E=require("ts-dedent"),Y=T(require("global")),N=require("@storybook/client-logger"),$=require("@storybook/csf"),g=require("@storybook/store");var D=T(require("global")),_=require("ts-dedent"),z=require("synchronous-promise"),u=require("@storybook/csf"),G=require("@storybook/store"),V=require("@storybook/client-logger"),K=T(require("util-deprecate")),mr=(0,K.default)(()=>{},"You cannot use `.mdx` files without using `storyStoreV7`. Consider upgrading to the new store."),O=class{constructor(){this.projectAnnotations={loaders:[],decorators:[],parameters:{},argsEnhancers:[],argTypesEnhancers:[],args:{},argTypes:{}},this.entries={},this.csfExports={}}importFn(r){return z.SynchronousPromise.resolve().then(()=>{let e=this.csfExports[r];if(!e)throw new Error(`Unknown path: ${r}`);return e})}getStoryIndex(r){var p,l;let e=Object.keys(this.csfExports),i=(l=(p=this.projectAnnotations.parameters)==null?void 0:p.options)==null?void 0:l.storySort,f=Object.entries(this.entries).map(([o,{type:d,importPath:n,...c}])=>{let S=this.csfExports[n],A=r.processCSFFileWithCache(S,n,S.default.title),w;return d==="story"?w=r.storyFromCSFFile({storyId:o,csfFile:A}):w={...c,story:c.name,kind:c.title,componentId:(0,u.toId)(c.componentId||c.title),parameters:{fileName:n}},[o,w,A.meta.parameters,this.projectAnnotations.parameters]}),m;try{m=(0,G.sortStoriesV6)(f,i,e)}catch(o){throw typeof i=="function"?new Error(_.dedent`
          Error sorting stories with sort parameter ${i}:

          > ${o.message}
          
          Are you using a V7-style sort function in V6 compatibility mode?
          
          More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort
        `):o}let a=m.reduce((o,d)=>(o[d.id]=this.entries[d.id],o),{});return{v:4,entries:a}}clearFilenameExports(r){!this.csfExports[r]||(Object.entries(this.entries).forEach(([e,{importPath:i}])=>{i===r&&delete this.entries[e]}),this.csfExports[r]={})}addStoriesFromExports(r,e){if(r.match(/\.mdx$/)&&!r.match(/\.stories\.mdx$/)){mr();return}if(this.csfExports[r]===e)return;this.clearFilenameExports(r);let{default:i,__namedExportsOrder:s,...f}=e,{id:m,title:a}=i||{},p=(D.default.STORIES||[]).map(n=>({...n,importPathMatcher:new RegExp(n.importPathMatcher)}));if(a=(0,G.userOrAutoTitle)(r,p,a),!a){V.logger.info(`Unexpected default export without title in '${r}': ${JSON.stringify(e.default)}`);return}this.csfExports[r]={...e,default:{...i,title:a}};let l=f;Array.isArray(s)&&(l={},s.forEach(n=>{let c=f[n];c&&(l[n]=c)}));let o=D.default.DOCS_OPTIONS||{},d=new Set;Object.entries(l).filter(([n])=>(0,u.isExportStory)(n,i)).forEach(([n,c])=>{var I,j;let S=(0,u.storyNameFromExport)(n),A=((I=c.parameters)==null?void 0:I.__id)||(0,u.toId)(m||a,S),w=typeof c!="function"&&c.name||c.storyName||((j=c.story)==null?void 0:j.name)||S;if(!d.has(a)&&o.docsPage){let k=o.defaultName,x=(0,u.toId)(m||a,k);d.add(a),this.entries[x]={type:"docs",standalone:!1,id:x,title:a,name:k,importPath:r,storiesImports:[],componentId:m}}this.entries[A]={type:"story",id:A,name:w,title:a,importPath:r,componentId:m}})}};var y,Q={addDecorator:"Instead, use `export const decorators = [];` in your `preview.js`.",addParameters:"Instead, use `export const parameters = {};` in your `preview.js`.",addLoaders:"Instead, use `export const loaders = [];` in your `preview.js`."},L=t=>(0,v.default)(()=>{},E.dedent`
  \`${t}\` is deprecated, and will be removed in Storybook 7.0.

  ${Q[t]}

  Read more at https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-addparameters-and-adddecorator).`),yr={addDecorator:L("addDecorator"),addParameters:L("addParameters"),addLoaders:L("addLoaders")},h=(t,r)=>{var e;if((e=Y.default.FEATURES)!=null&&e.storyStoreV7)throw new Error(E.dedent`You cannot use \`${t}\` with the new Story Store.

      ${Q[t]}`);if(!y)throw new Error(`Singleton client API not yet initialized, cannot call \`${t}\`.`);r&&yr[t]()},U=(t,r=!0)=>{h("addDecorator",r),y.addDecorator(t)},W=(t,r=!0)=>{h("addParameters",r),y.addParameters(t)},B=(t,r=!0)=>{h("addLoader",r),y.addLoader(t)},H=t=>{h("addArgs",!1),y.addArgs(t)},J=t=>{h("addArgTypes",!1),y.addArgTypes(t)},q=t=>{h("addArgsEnhancer",!1),y.addArgsEnhancer(t)},X=t=>{h("addArgTypesEnhancer",!1),y.addArgTypesEnhancer(t)},Z=t=>{h("addStepRunner",!1),y.addStepRunner(t)};var rr=t=>{h("setGlobalRender",!1),y.facade.projectAnnotations.render=t},fr=new Set(["string","number","boolean","symbol"]),C=class{constructor({storyStore:r}={}){this.lastFileName=0;this.setAddon=(0,v.default)(r=>{this.addons={...this.addons,...r}},E.dedent`
      \`setAddon\` is deprecated and will be removed in Storybook 7.0.

      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-setaddon
    `);this.addDecorator=r=>{this.facade.projectAnnotations.decorators.push(r)};this.clearDecorators=(0,v.default)(()=>{this.facade.projectAnnotations.decorators=[]},E.dedent`
      \`clearDecorators\` is deprecated and will be removed in Storybook 7.0.

      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-cleardecorators
    `);this.addParameters=({globals:r,globalTypes:e,...i})=>{this.facade.projectAnnotations.parameters=(0,g.combineParameters)(this.facade.projectAnnotations.parameters,i),r&&(this.facade.projectAnnotations.globals={...this.facade.projectAnnotations.globals,...r}),e&&(this.facade.projectAnnotations.globalTypes={...this.facade.projectAnnotations.globalTypes,...(0,g.normalizeInputTypes)(e)})};this.addStepRunner=r=>{this.facade.projectAnnotations.runStep=(0,g.composeStepRunners)([this.facade.projectAnnotations.runStep,r].filter(Boolean))};this.addLoader=r=>{this.facade.projectAnnotations.loaders.push(r)};this.addArgs=r=>{this.facade.projectAnnotations.args={...this.facade.projectAnnotations.args,...r}};this.addArgTypes=r=>{this.facade.projectAnnotations.argTypes={...this.facade.projectAnnotations.argTypes,...(0,g.normalizeInputTypes)(r)}};this.addArgsEnhancer=r=>{this.facade.projectAnnotations.argsEnhancers.push(r)};this.addArgTypesEnhancer=r=>{this.facade.projectAnnotations.argTypesEnhancers.push(r)};this.storiesOf=(r,e)=>{if(!r&&typeof r!="string")throw new Error("Invalid or missing kind provided for stories, should be a string");if(e||N.logger.warn(`Missing 'module' parameter for story with a kind of '${r}'. It will break your HMR`),e){let o=Object.getPrototypeOf(e);o.exports&&o.exports.default&&N.logger.error(`Illegal mix of CSF default export and storiesOf calls in a single file: ${o.i}`)}let i=e&&e.id?`${e.id}`:(this.lastFileName++).toString(),s=i,f=1;for(;this.facade.csfExports[s]&&Object.keys(this.facade.csfExports[s]).length>0;)f+=1,s=`${i}-${f}`;e&&e.hot&&e.hot.accept&&(e.hot.accept(),e.hot.dispose(()=>{this.facade.clearFilenameExports(s),setTimeout(()=>{var o;(o=this.onImportFnChanged)==null||o.call(this,{importFn:this.importFn.bind(this)})},0)}));let m=!1,a={kind:r.toString(),add:()=>a,addDecorator:()=>a,addLoader:()=>a,addParameters:()=>a};Object.keys(this.addons).forEach(o=>{let d=this.addons[o];a[o]=(...n)=>(d.apply(a,n),a)});let p={id:(0,$.sanitize)(r),title:r,decorators:[],loaders:[],parameters:{}};this.facade.csfExports[s]={default:p};let l=0;return a.add=(o,d,n={})=>{if(m=!0,typeof o!="string")throw new Error(`Invalid or missing storyName provided for a "${r}" story.`);if(!d||Array.isArray(d)||fr.has(typeof d))throw new Error(`Cannot load story "${o}" in "${r}" due to invalid format. Storybook expected a function/object but received ${typeof d} instead.`);let{decorators:c,loaders:S,component:A,args:w,argTypes:I,...j}=n,k=n.__id||(0,$.toId)(r,o),x=this.facade.csfExports[s];return x[`story${l}`]={name:o,parameters:{fileName:s,__id:k,...j},decorators:c,loaders:S,args:w,argTypes:I,component:A,render:d},l+=1,this.facade.entries[k]={id:k,title:x.default.title,name:o,importPath:s,type:"story"},a},a.addDecorator=o=>{if(m)throw new Error(`You cannot add a decorator after the first story for a kind.
Read more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories`);return p.decorators.push(o),a},a.addLoader=o=>{if(m)throw new Error("You cannot add a loader after the first story for a kind.");return p.loaders.push(o),a},a.addParameters=({component:o,args:d,argTypes:n,...c})=>{if(m)throw new Error(`You cannot add parameters after the first story for a kind.
Read more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories`);return p.parameters=(0,g.combineParameters)(p.parameters,c),o&&(p.component=o),d&&(p.args={...p.args,...d}),n&&(p.argTypes={...p.argTypes,...n}),a},a};this.getStorybook=()=>{let{entries:r}=this.storyStore.storyIndex,e={};return Object.entries(r).forEach(([i,{title:s,name:f,importPath:m,type:a}])=>{if(a&&a!=="story")return;e[s]||(e[s]={kind:s,fileName:m,stories:[]});let{storyFn:p}=this.storyStore.fromId(i);e[s].stories.push({name:f,render:p})}),Object.values(e)};this.raw=()=>this.storyStore.raw();this.facade=new O,this.addons={},this.storyStore=r,y=this}importFn(r){return this.facade.importFn(r)}getStoryIndex(){if(!this.storyStore)throw new Error("Cannot get story index before setting storyStore");return this.facade.getStoryIndex(this.storyStore)}get _storyStore(){return this.storyStore}};var tr=T(require("global")),er=require("qs"),{document:M}=tr.default,or=()=>M&&M.location&&M.location.search?(0,er.parse)(M.location.search,{ignoreQueryPrefix:!0}):{},lr=t=>or()[t];F(b,require("@storybook/store"),module.exports);0&&(module.exports={ClientApi,addArgTypes,addArgTypesEnhancer,addArgs,addArgsEnhancer,addDecorator,addLoader,addParameters,addStepRunner,getQueryParam,getQueryParams,setGlobalRender});
