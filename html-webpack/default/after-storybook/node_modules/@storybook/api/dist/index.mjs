import{a as I,g as Ee,h as Ie}from"./chunk-QWZ6NKKU.mjs";import M,{Component as No,Fragment as Lo,useCallback as Xe,useContext as xe,useEffect as Fo,useMemo as ve,useRef as Je}from"react";import Vo from"lodash/mergeWith";import{STORY_CHANGED as jo,SHARED_STATE_CHANGED as Ze,SHARED_STATE_SET as H,SET_STORIES as Go}from"@storybook/core-events";import{createContext as tt}from"react";var Re=({api:e,state:t})=>tt({api:e,state:t});import N from"store2";import{parse as ot,stringify as rt}from"telejson";var Te=e=>{e.fn("set",function(t,r){return e.set(this._area,this._in(t),rt(r,{maxDepth:50}))}),e.fn("get",function(t,r){let a=e.get(this._area,this._in(t));return a!==null?ot(a):r||a})};Te(N._);var Ae="@storybook/ui/store";function J(e){return e.get(Ae)||{}}function nt(e,t){return e.set(Ae,t)}function st(e,t){let r=J(e);return nt(e,{...r,...t})}var L=class{constructor({setState:t,getState:r}){this.upstreamSetState=t,this.upstreamGetState=r}getInitialState(t){return{...t,...J(N.local),...J(N.session)}}getState(){return this.upstreamGetState()}async setState(t,r,a){let d,p;typeof r=="function"?(d=r,p=a):p=r;let{persistence:c="none"}=p||{},n={},l={};typeof t=="function"?n=o=>(l=t(o),l):(n=t,l=n);let s=await new Promise(o=>{this.upstreamSetState(n,o)});if(c!=="none"){let o=c==="session"?N.session:N.local;await st(o,l)}return d&&d(s),s}};import at from"lodash/mergeWith";import it from"lodash/isEqual";import{logger as ct}from"@storybook/client-logger";var R=(e,t)=>at({},e,t,(r,a)=>{if(Array.isArray(a)&&Array.isArray(r))return a.forEach(d=>{r.find(c=>c===d||it(c,d))||r.push(d)}),r;if(Array.isArray(r))return ct.log(["the types mismatch, picking",r]),r});var lt=(...e)=>e.reduce((t,r)=>R(t,r),{}),U=lt;var Z={};I(Z,{init:()=>dt});var dt=({provider:e,fullAPI:t})=>({api:e.renderPreview?{renderPreview:e.renderPreview}:{},state:{},init:()=>{e.handleAPI(t)}});var te={};I(te,{ensurePanel:()=>ee,init:()=>pt,types:()=>we});var we=(p=>(p.TAB="tab",p.PANEL="panel",p.TOOL="tool",p.PREVIEW="preview",p.NOTES_ELEMENT="notes-element",p))(we||{});function ee(e,t,r){let a=Object.keys(e);return a.indexOf(t)>=0?t:a.length?a[0]:r}var pt=({provider:e,store:t,fullAPI:r})=>{let a={getElements:d=>e.getElements(d),getPanels:()=>a.getElements("panel"),getStoryPanels:()=>{let d=a.getPanels(),{storyId:p}=t.getState(),c=r.getData(p);if(!d||!c||c.type!=="story")return d;let{parameters:n}=c,l={};return Object.entries(d).forEach(([s,o])=>{let{paramKey:i}=o;i&&n&&n[i]&&n[i].disable||(l[s]=o)}),l},getSelectedPanel:()=>{let{selectedPanel:d}=t.getState();return ee(a.getPanels(),d,d)},setSelectedPanel:d=>{t.setState({selectedPanel:d},{persistence:"session"})},setAddonState(d,p,c){let n,{addons:l}=t.getState();return typeof p=="function"?n=p(a.getAddonState(d)):n=p,t.setState({addons:{...l,[d]:n}},c).then(()=>a.getAddonState(d))},getAddonState:d=>t.getState().addons[d]};return{api:a,state:{selectedPanel:ee(a.getPanels(),t.getState().selectedPanel),addons:{}}}};var oe={};I(oe,{init:()=>St});import{STORIES_COLLAPSE_ALL as ut,STORIES_EXPAND_ALL as yt}from"@storybook/core-events";var St=({provider:e})=>{let t={getChannel:()=>e.channel,on:(r,a)=>(e.channel.addListener(r,a),()=>e.channel.removeListener(r,a)),off:(r,a)=>e.channel.removeListener(r,a),once:(r,a)=>e.channel.once(r,a),emit:(r,a,...d)=>{a?.options?.target&&a.options.target!=="storybook-preview-iframe"&&!a.options.target.startsWith("storybook-ref-")&&(a.options.target=a.options.target!=="storybook_internal"?`storybook-ref-${a.options.target}`:"storybook-preview-iframe"),e.channel.emit(r,a,...d)},collapseAll:()=>{e.channel.emit(ut,{})},expandAll:()=>{t.emit(yt)}};return{api:t,state:{}}};var re={};I(re,{init:()=>ft});var ft=({store:e})=>{let t={addNotification:a=>{t.clearNotification(a.id);let{notifications:d}=e.getState();e.setState({notifications:[...d,a]})},clearNotification:a=>{let{notifications:d}=e.getState();e.setState({notifications:d.filter(c=>c.id!==a)});let p=d.find(c=>c.id===a);p&&p.onClear&&p.onClear()}};return{api:t,state:{notifications:[]}}};var ne={};I(ne,{init:()=>mt});var mt=({store:e,navigate:t,fullAPI:r})=>{let a=()=>{let{path:p}=r.getUrlState();return!!(p||"").match(/^\/settings/)};return{state:{settings:{lastTrackedStoryId:null}},api:{closeSettings:()=>{let{settings:{lastTrackedStoryId:p}}=e.getState();p?r.selectStory(p):r.selectFirstStory()},changeSettingsTab:p=>{t(`/settings/${p}`)},isSettingsScreenActive:a,navigateToSettingsPage:async p=>{if(!a()){let{settings:c,storyId:n}=e.getState();await e.setState({settings:{...c,lastTrackedStoryId:n}})}t(p)}}}};var se={};I(se,{init:()=>vt});import gt from"global";import ht from"memoizerific";var{RELEASE_NOTES_DATA:bt}=gt,Pt=ht(1)(()=>{try{return{...JSON.parse(bt)||{}}}catch{return{}}}),vt=({store:e})=>{let t=Pt(),r=()=>{let{releaseNotesViewed:d}=e.getState();return d||[]};return{state:{releaseNotesViewed:[]},api:{releaseNotesVersion:()=>t.currentVersion,setDidViewReleaseNotes:()=>{let d=r();d.includes(t.currentVersion)||e.setState({releaseNotesViewed:[...d,t.currentVersion]},{persistence:"permanent"})},showReleaseNotesOnLaunch:()=>{if(!t.currentVersion)return!1;let p=r().includes(t.currentVersion);return t.showOnFirstLaunch&&!p}}}};var de={};I(de,{init:()=>oo});import Gt from"global";import{toId as $,sanitize as He}from"@storybook/csf";import{PRELOAD_ENTRIES as Ht,STORY_PREPARED as Ut,UPDATE_STORY_ARGS as _t,RESET_STORY_ARGS as $t,STORY_ARGS_UPDATED as Kt,STORY_CHANGED as Bt,SELECT_STORY as qt,SET_STORIES as Qt,STORY_SPECIFIED as Wt,STORY_INDEX_INVALIDATED as Yt,CONFIG_ERROR as zt}from"@storybook/core-events";import Xt from"util-deprecate";import{logger as Jt}from"@storybook/client-logger";import{logger as jt}from"@storybook/client-logger";var ce={};I(ce,{defaultStoryMapper:()=>Ge,getSourceType:()=>ie,init:()=>Vt});import je from"global";import{dedent as Mt}from"ts-dedent";import Ce from"memoizerific";import xt from"util-deprecate";import{dedent as Oe}from"ts-dedent";import Et from"lodash/mapValues";import It from"lodash/countBy";import Rt from"global";import{toId as Tt,sanitize as At}from"@storybook/csf";var{FEATURES:wt}=Rt,Ct=xt(()=>{},Oe`
    The default hierarchy separators changed in Storybook 6.0.
    '|' and '.' will no longer create a hierarchy, but codemods are available.
    Read more about it in the migration guide: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md
  `),ke=({globalParameters:e,kindParameters:t,stories:r})=>Et(r,a=>({...a,parameters:Le(e,t[a.kind],a.parameters)})),Ot=/\s*\/\s*/,_=(e,{provider:t,docsOptions:r})=>F(kt(e,{docsOptions:r}),{provider:t,docsOptions:r}),kt=(e,{docsOptions:t})=>{let r=new Set,a=Object.entries(e).reduce((d,[p,c])=>{if(!c)return d;let{docsOnly:n,fileName:l,...s}=c.parameters,o={title:c.kind,id:p,name:c.name,importPath:l};if(n)d[p]={type:"docs",storiesImports:[],...o};else{if(!r.has(o.title)&&t.docsPage){let u=t.defaultName,f=Tt(c.componentId||o.title,u);r.add(o.title),d[f]={type:"docs",storiesImports:[],...o,id:f,name:u}}let{argTypes:i,args:y,initialArgs:S}=c;d[p]={type:"story",...o,parameters:s,argTypes:i,args:y,initialArgs:S}}return d},{});return{v:4,entries:a}},Dt=e=>{let t=It(Object.values(e.stories),"title");return{v:4,entries:Object.values(e.stories).reduce((r,a)=>{let d="story";return(a.parameters?.docsOnly||a.name==="Page"&&t[a.title]===1)&&(d="docs"),r[a.id]={type:d,...d==="docs"&&{storiesImports:[]},...a},r},{})}},F=(e,{provider:t,docsOptions:r})=>{if(!e.v)throw new Error("Composition: Missing stories.json version");let a=e.v===4?e:Dt(e),d=Object.values(a.entries),{sidebar:p={}}=t.getConfig(),{showRoots:c,collapsedRoots:n=[],renderLabel:l}=p,s=d.some(({title:u})=>u.match(/\.|\|/)),o=typeof c<"u";s&&!o&&wt?.warnOnLegacyHierarchySeparator&&Ct();let i=Object.values(d).reduce((u,f)=>{if(r.docsMode&&f.type!=="docs")return u;let{title:m}=f,g=m.trim().split(Ot),P=(!o||c)&&g.length>1?[g.shift()]:[],x=[...P,...g],v=x.reduce((h,E,C)=>{let z=C>0&&h[C-1],X=At(z?`${z}-${E}`:E);if(z===X)throw new Error(Oe`
          Invalid part '${E}', leading to id === parentId ('${X}'), inside title '${m}'
          
          Did you create a path that uses the separator char accidentally, such as 'Vue <docs/>' where '/' is a separator char? See https://github.com/storybookjs/storybook/issues/6128
          `);return h.push(X),h},[]);return v.forEach((h,E)=>{let C=v[E+1]||f.id;P.length&&E===0?u[h]=R(u[h]||{},{type:"root",id:h,name:x[E],depth:E,renderLabel:l,startCollapsed:n.includes(h),children:[C],isRoot:!0,isComponent:!1,isLeaf:!1}):(!u[h]||u[h].type==="component")&&E===v.length-1?u[h]=R(u[h]||{},{type:"component",id:h,name:x[E],parent:v[E-1],depth:E,renderLabel:l,...C&&{children:[C]},isRoot:!1,isComponent:!0,isLeaf:!1}):u[h]=R(u[h]||{},{type:"group",id:h,name:x[E],parent:v[E-1],depth:E,renderLabel:l,...C&&{children:[C]},isRoot:!1,isComponent:!1,isLeaf:!1})}),u[f.id]={type:"story",...f,depth:v.length,parent:v[v.length-1],renderLabel:l,...f.type!=="docs"&&{prepared:!!f.parameters},kind:f.title,isRoot:!1,isComponent:!1,isLeaf:!0},u},{});function y(u,f){return u[f.id]||(u[f.id]=f,(f.type==="root"||f.type==="group"||f.type==="component")&&f.children.forEach(m=>y(u,i[m]))),u}let S=Object.values(i).filter(u=>u.type!=="root"&&!u.parent).reduce(y,{});return Object.values(i).filter(u=>u.type==="root").reduce(y,S)},De=(e,t)=>t?Object.fromEntries(Object.entries(e).map(([r,a])=>{let d=t[r];return a.type==="story"&&d?.type==="story"&&d.prepared?[r,{...d,...a,prepared:!0}]:[r,a]})):e,Me=Ce(1)(e=>Object.entries(e).reduce((t,r)=>{let a=r[1];return a.type==="component"&&t.push([...a.children]),t},[])),Ne=Ce(1)(e=>Object.keys(e).filter(t=>["story","docs"].includes(e[t].type)));var{location:Nt,fetch:Fe}=je,Ve=/(\/((?:[^\/]+?)\.[^\/]+?)|\/)$/,ie=(e,t)=>{let{origin:r,pathname:a}=Nt,{origin:d,pathname:p}=new URL(e),c=`${r+a}`.replace(Ve,""),n=`${d+p}`.replace(Ve,"");return c===n?["local",n]:t||e?["external",n]:[null,null]},Ge=(e,t)=>({...t,kind:t.kind.replace("|","/")}),Lt=(e,t)=>Object.entries(e).reduce((r,[a,d])=>({...r,[a]:{...d,refId:t.id}}),{});async function ae(e){if(!e)return{};try{let t=await e;if(!t.ok)return{};let r=await t.json();return r.entries||r.stories?{storyIndex:r}:r}catch(t){return{error:t}}}var Ft=(e,t,r)=>{let{storyMapper:a}=r;return a?Object.entries(e).reduce((d,[p,c])=>({...d,[p]:a(t,c)}),{}):e},Vt=({store:e,provider:t,singleStory:r,docsOptions:a={}},{runCheck:d=!0}={})=>{let p={findRef:l=>{let s=p.getRefs();return Object.values(s).find(({url:o})=>o.match(l))},changeRefVersion:(l,s)=>{let{versions:o,title:i}=p.getRefs()[l],y={id:l,url:s,versions:o,title:i,stories:{}};p.checkRef(y)},changeRefState:(l,s)=>{let{[l]:o,...i}=p.getRefs();i[l]={...o,ready:s},e.setState({refs:i})},checkRef:async l=>{let{id:s,url:o,version:i,type:y}=l,S=y==="server-checked",u={},f=i?`?version=${i}`:"",m=S?"omit":"include",[g,P]=await Promise.all(["index.json","stories.json"].map(async v=>Fe(`${o}/${v}${f}`,{headers:{Accept:"application/json"},credentials:m})));if(g.ok||P.ok){let[v,h]=await Promise.all([g.ok?ae(g):ae(P),ae(Fe(`${o}/metadata.json${f}`,{headers:{Accept:"application/json"},credentials:m,cache:"no-cache"}).catch(()=>!1))]);Object.assign(u,{...v,...h})}else S||(u.error={message:Mt`
            Error: Loading of ref failed
              at fetch (lib/api/src/modules/refs.ts)

            URL: ${o}

            We weren't able to load the above URL,
            it's possible a CORS error happened.

            Please check your dev-tools network tab.
          `});let x=l.versions&&Object.keys(l.versions).length?l.versions:u.versions;await p.setRef(s,{id:s,url:o,...u,...x?{versions:x}:{},type:u.storyIndex?"lazy":"auto-inject"})},getRefs:()=>{let{refs:l={}}=e.getState();return l},setRef:(l,{storyIndex:s,setStoriesData:o,...i},y=!1)=>{if(r)return;let{storyMapper:S=Ge}=t.getConfig(),u=p.getRefs()[l],f;o?f=_(Ft(o,u,{storyMapper:S}),{provider:t,docsOptions:a}):s&&(f=F(s,{provider:t,docsOptions:a})),f&&(f=Lt(f,u)),p.updateRef(l,{stories:f,...i,ready:y})},updateRef:(l,s)=>{let{[l]:o,...i}=p.getRefs();i[l]={...o,...s};let y=Object.keys(n).reduce((S,u)=>(S[u]=i[u],S),{});e.setState({refs:y})}},c=!r&&je.REFS||{},n=c;return d&&Object.entries(c).forEach(([l,s])=>{p.checkRef({...s,stories:{}})}),{api:p,state:{refs:n}}};var T=(e,t)=>{let{source:r,refId:a,type:d}=e,[p,c]=ie(r,a),n=a&&t.getRefs()[a]?t.getRefs()[a]:t.findRef(c),l={source:r,sourceType:p,sourceLocation:c,refId:a,ref:n,type:d};switch(!0){case typeof a=="string":case p==="local":case p==="external":return l;default:return jt.warn(`Received a ${d} frame that was not configured as a ref`),null}};var{FEATURES:Zt,fetch:eo}=Gt,to="./index.json",Ue=["enableShortcuts","theme","showRoots"].reduce((e,t)=>(e[t]=Xt(()=>{},`parameters.options.${t} is deprecated and will be removed in Storybook 7.0.
To change this setting, use \`addons.setConfig\`. See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-immutable-options-parameters
  `),e),{});function le(e){!e||Object.keys(e).forEach(t=>{Ue[t]&&Ue[t]()})}var oo=({fullAPI:e,store:t,navigate:r,provider:a,storyId:d,viewMode:p,docsOptions:c={}})=>{let n={storyId:$,getData:(s,o)=>{let i=n.resolveStory(s,o);if(i?.type==="story"||i?.type==="docs")return i},isPrepared:(s,o)=>{let i=n.getData(s,o);return i.type==="story"?i.prepared:!0},resolveStory:(s,o)=>{let{refs:i,storiesHash:y}=t.getState();return o?i[o].stories?i[o].stories[s]:void 0:y?y[s]:void 0},getCurrentStoryData:()=>{let{storyId:s,refId:o}=t.getState();return n.getData(s,o)},getParameters:(s,o)=>{let{storyId:i,refId:y}=typeof s=="string"?{storyId:s,refId:void 0}:s,S=n.getData(i,y);if(S?.type==="story"){let{parameters:u}=S;if(u)return o?u[o]:u}return null},getCurrentParameter:s=>{let{storyId:o,refId:i}=t.getState();return n.getParameters({storyId:o,refId:i},s)||void 0},jumpToComponent:s=>{let{storiesHash:o,storyId:i,refs:y,refId:S}=t.getState();if(!n.getData(i,S))return;let f=S?y[S].stories||{}:o,m=n.findSiblingStoryId(i,f,s,!0);m&&n.selectStory(m,void 0,{ref:S})},jumpToStory:s=>{let{storiesHash:o,storyId:i,refs:y,refId:S}=t.getState(),u=n.getData(i,S);if(!u)return;let f=u.refId?y[u.refId].stories:o,m=n.findSiblingStoryId(i,f,s,!1);m&&n.selectStory(m,void 0,{ref:S})},setStories:async(s,o)=>{let i=_(s,{provider:a,docsOptions:c});await t.setState({storiesHash:i,storiesConfigured:!0,storiesFailed:o})},selectFirstStory:()=>{let{storiesHash:s}=t.getState(),o=Object.keys(s).find(i=>s[i].type==="story");if(o){n.selectStory(o);return}r("/")},selectStory:(s=void 0,o=void 0,i={})=>{let{ref:y}=i,{storyId:S,storiesHash:u,refs:f}=t.getState(),m=y?f[y].stories:u,g=S?.split("--",2)[0];if(o)if(s){let P=y?`${y}_${$(s,o)}`:$(s,o);if(m[P])n.selectStory(P,void 0,i);else{let x=m[He(s)];if(x?.type==="component"){let v=x.children.find(h=>m[h].name===o);v&&n.selectStory(v,void 0,i)}}}else{let P=$(g,o);n.selectStory(P,void 0,i)}else{let P=s?m[s]||m[He(s)]:m[g];if(!P)throw new Error(`Unknown id or title: '${s}'`);let x=n.findLeafEntry(m,P.id),v=x.refId?`${x.refId}_${x.id}`:x.id;r(`/${x.type}/${v}`)}},findLeafEntry(s,o){let i=s[o];if(i.type==="docs"||i.type==="story")return i;let y=i.children[0];return n.findLeafEntry(s,y)},findLeafStoryId(s,o){return n.findLeafEntry(s,o)?.id},findSiblingStoryId(s,o,i,y){if(y){let f=Me(o),m=f.findIndex(g=>g.includes(s));return m===f.length-1&&i>0||m===0&&i<0?void 0:f[m+i]?f[m+i][0]:void 0}let S=Ne(o),u=S.indexOf(s);if(!(u===S.length-1&&i>0)&&!(u===0&&i<0))return S[u+i]},updateStoryArgs:(s,o)=>{let{id:i,refId:y}=s;e.emit(_t,{storyId:i,updatedArgs:o,options:{target:y}})},resetStoryArgs:(s,o)=>{let{id:i,refId:y}=s;e.emit($t,{storyId:i,argNames:o,options:{target:y}})},fetchStoryList:async()=>{try{let s=await eo(to);if(s.status!==200)throw new Error(await s.text());let o=await s.json();if(o.v<3){Jt.warn(`Skipping story index with version v${o.v}, awaiting SET_STORIES.`);return}await e.setStoryList(o)}catch(s){t.setState({storiesConfigured:!0,storiesFailed:s})}},setStoryList:async s=>{let o=F(s,{provider:a,docsOptions:c}),i=t.getState().storiesHash;await t.setState({storiesHash:De(o,i),storiesConfigured:!0,storiesFailed:null})},updateStory:async(s,o,i)=>{if(i){let{id:y,stories:S}=i;S[s]={...S[s],...o},await e.updateRef(y,{stories:S})}else{let{storiesHash:y}=t.getState();y[s]={...y[s],...o},await t.setState({storiesHash:y})}}};return{api:n,state:{storiesHash:{},storyId:d,viewMode:p,storiesConfigured:!1,hasCalledSetOptions:!1},init:async()=>{e.on(Wt,function({storyId:o,viewMode:i}){let{sourceType:y}=T(this,e);if(!e.isSettingsScreenActive()&&y==="local"){let S=t.getState();(S.storyId!==o||S.viewMode!==i)&&r(`/${i}/${o}`)}}),e.on(Bt,function(){let{sourceType:o}=T(this,e);if(o==="local"){let i=e.getCurrentParameter("options");i&&(le(i),e.setOptions(i))}}),e.on(Ut,function({id:o,...i}){let{ref:y,sourceType:S}=T(this,e);if(e.updateStory(o,{...i,prepared:!0},y),y)e.updateRef(y.id,{ready:!0});else if(!t.getState().hasCalledSetOptions){let{options:u}=i.parameters;le(u),e.setOptions(u),t.setState({hasCalledSetOptions:!0})}if(S==="local"){let{storyId:u,storiesHash:f,refId:m}=t.getState(),g=Array.from(new Set([n.findSiblingStoryId(u,f,1,!0),n.findSiblingStoryId(u,f,-1,!0)])).filter(Boolean);e.emit(Ht,{ids:g,options:{target:m}})}}),e.on(Qt,function(o){let{ref:i}=T(this,e),y=o.v?ke(o):o.stories;if(i)e.setRef(i.id,{...i,setStoriesData:y},!0);else{if(!o.v)throw new Error("Unexpected legacy SET_STORIES event from local source");e.setStories(y);let S=e.getCurrentParameter("options");le(S),e.setOptions(S)}}),e.on(qt,function({kind:o,story:i,storyId:y,...S}){let{ref:u}=T(this,e);u?e.selectStory(y||o,i,{...S,ref:u.id}):e.selectStory(y||o,i,S)}),e.on(Kt,function({storyId:o,args:i}){let{ref:y}=T(this,e);e.updateStory(o,{args:i},y)}),e.on(zt,function(o){t.setState({storiesConfigured:!0,storiesFailed:o})}),Zt?.storyStoreV7&&(a.serverChannel?.on(Yt,()=>e.fetchStoryList()),await e.fetchStoryList())}}};var B={};I(B,{ActiveTabs:()=>_e,focusableUIElements:()=>j,init:()=>lo});import ro from"global";import V from"lodash/pick";import{dequal as K}from"dequal";import{create as no}from"@storybook/theming/create";import{SET_CONFIG as so}from"@storybook/core-events";import{once as ao}from"@storybook/client-logger";import{dedent as io}from"ts-dedent";var{document:co}=ro,_e={SIDEBAR:"sidebar",CANVAS:"canvas",ADDONS:"addons"},k={ui:{enableShortcuts:!0},layout:{initialActive:_e.CANVAS,showToolbar:!0,isFullscreen:!1,showPanel:!0,showNav:!0,panelPosition:"bottom",showTabs:!0},selectedPanel:void 0,theme:no()},j={storySearchField:"storybook-explorer-searchfield",storyListMenu:"storybook-explorer-menu",storyPanelRoot:"storybook-panel-root"},lo=({store:e,provider:t,singleStory:r,fullAPI:a})=>{let d={toggleFullscreen(c){return e.setState(n=>{let{showNav:l}=n.layout,s=typeof c=="boolean"?c:!n.layout.isFullscreen,o=l===!1&&s===!1;return{layout:{...n.layout,isFullscreen:s,showNav:!r&&o?!0:l}}},{persistence:"session"})},togglePanel(c){return e.setState(n=>{let{showNav:l,isFullscreen:s}=n.layout,o=typeof c<"u"?c:!n.layout.showPanel,i=l===!1&&o===!1;return{layout:{...n.layout,showPanel:o,isFullscreen:i?!0:s}}},{persistence:"session"})},togglePanelPosition(c){return typeof c<"u"?e.setState(n=>({layout:{...n.layout,panelPosition:c}}),{persistence:"permanent"}):e.setState(n=>({layout:{...n.layout,panelPosition:n.layout.panelPosition==="right"?"bottom":"right"}}),{persistence:"permanent"})},toggleNav(c){return e.setState(n=>{if(r)return{layout:n.layout};let{showPanel:l,isFullscreen:s}=n.layout,o=typeof c<"u"?c:!n.layout.showNav,i=l===!1&&o===!1;return{layout:{...n.layout,showNav:o,isFullscreen:i?!0:!o&&s}}},{persistence:"session"})},toggleToolbar(c){return e.setState(n=>{let l=typeof c<"u"?c:!n.layout.showToolbar;return{layout:{...n.layout,showToolbar:l}}},{persistence:"session"})},resetLayout(){return e.setState(c=>({layout:{...c.layout,showNav:!1,showPanel:!1,isFullscreen:!1}}),{persistence:"session"})},focusOnUIElement(c,n){if(!c)return;let l=co.getElementById(c);l&&(l.focus(),n&&l.select())},getInitialOptions(){let{theme:c,selectedPanel:n,...l}=t.getConfig();return l.layout?.isToolshown!==void 0&&(ao.warn(io`
          The "isToolshown" option is deprecated. Please use "showToolbar" instead.

          See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#renamed-istoolshown-to-showtoolbar
        `),l.layout.showToolbar=l.layout.isToolshown),{...k,layout:{...k.layout,...V(l,Object.keys(k.layout)),...r&&{showNav:!1}},ui:{...k.ui,...V(l,Object.keys(k.ui))},selectedPanel:n||k.selectedPanel,theme:c||k.theme}},setOptions:c=>{let{layout:n,ui:l,selectedPanel:s,theme:o}=e.getState();if(c){let i={...n,...V(c,Object.keys(n)),...r&&{showNav:!1}},y={...l,...V(c,Object.keys(l))},S={...o,...c.theme},u={};K(l,y)||(u.ui=y),K(n,i)||(u.layout=i),c.selectedPanel&&!K(s,c.selectedPanel)&&(u.selectedPanel=c.selectedPanel),Object.keys(u).length&&e.setState(u,{persistence:"permanent"}),K(o,S)||e.setState({theme:S})}}},p=V(e.getState(),"layout","ui","selectedPanel");return{api:d,state:R(d.getInitialOptions(),p),init:()=>{d.setOptions(R(d.getInitialOptions(),p)),a.on(so,()=>{d.setOptions(R(d.getInitialOptions(),p))})}}};var Se={};I(Se,{controlOrMetaKey:()=>q,defaultShortcuts:()=>D,init:()=>So,isMacLike:()=>Ke,keys:()=>ye});import po from"global";import{PREVIEW_KEYDOWN as uo}from"@storybook/core-events";var{navigator:pe,document:$e}=po,Ke=()=>pe&&pe.platform?!!pe.platform.match(/(Mac|iPhone|iPod|iPad)/i):!1,q=()=>Ke()?"meta":"control";function ye(e){return Object.keys(e)}var D=Object.freeze({fullScreen:["F"],togglePanel:["A"],panelPosition:["D"],toggleNav:["S"],toolbar:["T"],search:["/"],focusNav:["1"],focusIframe:["2"],focusPanel:["3"],prevComponent:["alt","ArrowUp"],nextComponent:["alt","ArrowDown"],prevStory:["alt","ArrowLeft"],nextStory:["alt","ArrowRight"],shortcutsPage:[q(),"shift",","],aboutPage:[","],escape:["escape"],collapseAll:[q(),"shift","ArrowUp"],expandAll:[q(),"shift","ArrowDown"]}),ue={};function yo(e){let t=e.target;return/input|textarea/i.test(t.tagName)||t.getAttribute("contenteditable")!==null}var So=({store:e,fullAPI:t})=>{let r={getShortcutKeys(){return e.getState().shortcuts},getDefaultShortcuts(){return{...D,...r.getAddonsShortcutDefaults()}},getAddonsShortcuts(){return ue},getAddonsShortcutLabels(){let c={};return Object.entries(r.getAddonsShortcuts()).forEach(([n,{label:l}])=>{c[n]=l}),c},getAddonsShortcutDefaults(){let c={};return Object.entries(r.getAddonsShortcuts()).forEach(([n,{defaultShortcut:l}])=>{c[n]=l}),c},async setShortcuts(c){return await e.setState({shortcuts:c},{persistence:"permanent"}),c},async restoreAllDefaultShortcuts(){return r.setShortcuts(r.getDefaultShortcuts())},async setShortcut(c,n){let l=r.getShortcutKeys();return await r.setShortcuts({...l,[c]:n}),n},async setAddonShortcut(c,n){let l=r.getShortcutKeys();return await r.setShortcuts({...l,[`${c}-${n.actionName}`]:n.defaultShortcut}),ue[`${c}-${n.actionName}`]=n,n},async restoreDefaultShortcut(c){let n=r.getDefaultShortcuts()[c];return r.setShortcut(c,n)},handleKeydownEvent(c){let n=Ee(c),l=r.getShortcutKeys(),o=ye(l).find(i=>Ie(n,l[i]));o&&(c?.preventDefault&&c.preventDefault(),r.handleShortcutFeature(o))},handleShortcutFeature(c){let{layout:{isFullscreen:n,showNav:l,showPanel:s},ui:{enableShortcuts:o}}=e.getState();if(!!o)switch(c){case"escape":{n?t.toggleFullscreen():l||t.toggleNav();break}case"focusNav":{n&&t.toggleFullscreen(),l||t.toggleNav(),t.focusOnUIElement(j.storyListMenu);break}case"search":{n&&t.toggleFullscreen(),l||t.toggleNav(),setTimeout(()=>{t.focusOnUIElement(j.storySearchField,!0)},0);break}case"focusIframe":{let i=$e.getElementById("storybook-preview-iframe");if(i)try{i.contentWindow.focus()}catch{}break}case"focusPanel":{n&&t.toggleFullscreen(),s||t.togglePanel(),t.focusOnUIElement(j.storyPanelRoot);break}case"nextStory":{t.jumpToStory(1);break}case"prevStory":{t.jumpToStory(-1);break}case"nextComponent":{t.jumpToComponent(1);break}case"prevComponent":{t.jumpToComponent(-1);break}case"fullScreen":{t.toggleFullscreen();break}case"togglePanel":{n&&(t.toggleFullscreen(),t.resetLayout()),t.togglePanel();break}case"toggleNav":{n&&(t.toggleFullscreen(),t.resetLayout()),t.toggleNav();break}case"toolbar":{t.toggleToolbar();break}case"panelPosition":{n&&t.toggleFullscreen(),s||t.togglePanel(),t.togglePanelPosition();break}case"aboutPage":{t.navigate("/settings/about");break}case"shortcutsPage":{t.navigate("/settings/shortcuts");break}case"collapseAll":{t.collapseAll();break}case"expandAll":{t.expandAll();break}default:ue[c].action();break}}},{shortcuts:a=D}=e.getState(),d={shortcuts:ye(D).reduce((c,n)=>({...c,[n]:a[n]||D[n]}),D)};return{api:r,state:d,init:()=>{$e.addEventListener("keydown",c=>{yo(c)||t.handleKeydownEvent(c)}),t.on(uo,c=>{t.handleKeydownEvent(c.event)})}}};var ge={};I(ge,{init:()=>Ro});import{once as Q}from"@storybook/client-logger";import{NAVIGATE_URL as fo,STORY_ARGS_UPDATED as mo,SET_CURRENT_STORY as go,GLOBALS_UPDATED as ho,UPDATE_QUERY_PARAMS as bo}from"@storybook/core-events";import{queryFromLocation as Po,buildArgsParam as Be}from"@storybook/router";import{toId as vo,sanitize as xo}from"@storybook/csf";import{dequal as qe}from"dequal";import Eo from"global";import{dedent as W}from"ts-dedent";var{window:fe}=Eo,G=e=>{if(e==="true"||e==="1")return!0;if(e==="false"||e==="0")return!1},me,Io=({state:{location:e,path:t,viewMode:r,storyId:a},singleStory:d})=>{let{full:p,panel:c,nav:n,shortcuts:l,addonPanel:s,tabs:o,addons:i,panelRight:y,stories:S,selectedKind:u,selectedStory:f,path:m,...g}=Po(e),P={isFullscreen:G(p),showNav:!d&&G(n),showPanel:G(c),panelPosition:["right","bottom"].includes(c)?c:void 0,showTabs:G(o)},x={enableShortcuts:G(l)},v=s||void 0;i==="0"&&(Q.warn(W`
      The 'addons' query param is deprecated and will be removed in Storybook 7.0. Use 'panel=false' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),P.showPanel=!1),y==="1"&&(Q.warn(W`
      The 'panelRight' query param is deprecated and will be removed in Storybook 7.0. Use 'panel=right' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),P.panelPosition="right"),S==="0"&&(Q.warn(W`
      The 'stories' query param is deprecated and will be removed in Storybook 7.0. Use 'nav=false' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),P.showNav=!1);let h=a;!h&&u&&(Q.warn(W`
      The 'selectedKind' and 'selectedStory' query params are deprecated and will be removed in Storybook 7.0. Use 'path' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),h=f?vo(u,f):xo(u));let E=qe(me,g)?me:g;return me=E,{viewMode:r,layout:P,ui:x,selectedPanel:v,location:e,path:t,customQueryParams:E,storyId:h}},Ro=({store:e,navigate:t,state:r,provider:a,fullAPI:d,...p})=>{let c=(s,o={},i={})=>{let y=Object.entries(o).filter(([,u])=>u).sort(([u],[f])=>u<f?-1:1).map(([u,f])=>`${u}=${f}`),S=[s,...y].join("&");return t(S,i)},n={getQueryParam(s){let{customQueryParams:o}=e.getState();return o?o[s]:void 0},getUrlState(){let{path:s,customQueryParams:o,storyId:i,url:y,viewMode:S}=e.getState();return{path:s,queryParams:o,storyId:i,url:y,viewMode:S}},setQueryParams(s){let{customQueryParams:o}=e.getState(),i={},y={...o,...Object.entries(s).reduce((S,[u,f])=>(f!==null&&(S[u]=f),S),i)};qe(o,y)||(e.setState({customQueryParams:y}),d.emit(bo,y))},navigateUrl(s,o){t(s,{...o,plain:!0})}},l=()=>{let s=()=>{let{path:i,queryParams:y,viewMode:S}=d.getUrlState();if(S!=="story")return;let u=d.getCurrentStoryData();if(u?.type!=="story")return;let{args:f,initialArgs:m}=u,g=Be(m,f);c(i,{...y,args:g},{replace:!0}),n.setQueryParams({args:g})};d.on(go,()=>s());let o;d.on(mo,()=>{"requestIdleCallback"in fe?(o&&fe.cancelIdleCallback(o),o=fe.requestIdleCallback(s,{timeout:1e3})):(o&&clearTimeout(o),setTimeout(s,100))}),d.on(ho,({globals:i,initialGlobals:y})=>{let{path:S,queryParams:u}=d.getUrlState(),f=Be(y,i);c(S,{...u,globals:f},{replace:!0}),n.setQueryParams({globals:f})}),d.on(fo,(i,y)=>{d.navigateUrl(i,y)}),d.showReleaseNotesOnLaunch()&&t("/settings/release-notes")};return{api:n,state:Io({store:e,navigate:t,state:r,provider:a,fullAPI:d,...p}),init:l}};var he={};I(he,{init:()=>Co});import To from"global";import A from"semver";import Ao from"memoizerific";var Qe="7.0.0-alpha.37";var{VERSIONCHECK:wo}=To,We=Ao(1)(()=>{try{return{...JSON.parse(wo).data||{}}}catch{return{}}}),Co=({store:e,mode:t,fullAPI:r})=>{let{dismissedVersionNotification:a}=e.getState(),d={versions:{current:{version:Qe},...We()},dismissedVersionNotification:a},p={getCurrentVersion:()=>{let{versions:{current:n}}=e.getState();return n},getLatestVersion:()=>{let{versions:{latest:n,next:l,current:s}}=e.getState();return s&&A.prerelease(s.version)&&l?n&&A.gt(n.version,l.version)?n:l:n},versionUpdateAvailable:()=>{let n=p.getLatestVersion(),l=p.getCurrentVersion();if(n){if(!n.version||!l.version)return!0;let o=!!A.prerelease(l.version)?`${A.major(l.version)}.${A.minor(l.version)}.${A.patch(l.version)}`:l.version,i=A.diff(o,n.version);return A.gt(n.version,o)&&i!=="patch"&&!i.includes("pre")}return!1}};return{init:async()=>{let{versions:n={}}=e.getState(),{latest:l,next:s}=We();if(await e.setState({versions:{...n,latest:l,next:s}}),p.versionUpdateAvailable()){let o=p.getLatestVersion().version,i=A.diff(n.current.version,n.latest.version);o!==a&&i!=="patch"&&!A.prerelease(o)&&t!=="production"&&r.addNotification({id:"update",link:"/settings/about",content:{headline:`Storybook ${o} is available!`,subHeadline:`Your current version is: ${n.current.version}`},icon:{name:"book"},onClear(){e.setState({dismissedVersionNotification:o},{persistence:"permanent"})}})}},state:d,api:p}};var be={};I(be,{init:()=>Mo});import{SET_GLOBALS as Oo,UPDATE_GLOBALS as ko,GLOBALS_UPDATED as Do}from"@storybook/core-events";import{logger as Ye}from"@storybook/client-logger";import{dequal as ze}from"dequal";var Mo=({store:e,fullAPI:t})=>{let r={getGlobals(){return e.getState().globals},getGlobalTypes(){return e.getState().globalTypes},updateGlobals(c){t.emit(ko,{globals:c,options:{target:"storybook-preview-iframe"}})}},a={globals:{},globalTypes:{}},d=c=>{let n=e.getState()?.globals;ze(c,n)||e.setState({globals:c})};return{api:r,state:a,init:()=>{t.on(Do,function({globals:n}){let{ref:l}=T(this,t);l?Ye.warn("received a GLOBALS_UPDATED from a non-local ref. This is not currently supported."):d(n)}),t.on(Oo,function({globals:n,globalTypes:l}){let{ref:s}=T(this,t),o=e.getState()?.globals;s?Object.keys(n).length>0&&Ye.warn("received globals from a non-local ref. This is not currently supported."):e.setState({globals:n,globalTypes:l}),o&&Object.keys(o).length!==0&&!ze(n,o)&&r.updateGlobals(o)})}}};var{ActiveTabs:Rn}=B;var Y=Re({api:void 0,state:U({})}),Le=(...e)=>Vo({},...e,(t,r)=>{if(Array.isArray(r))return r}),Pe=class extends No{constructor(r){super(r);this.api={};this.initModules=()=>{this.modules.forEach(r=>{"init"in r&&r.init()})};let{location:a,path:d,refId:p,viewMode:c=r.docsOptions.docsMode?"docs":"story",singleStory:n,storyId:l,docsOptions:s,navigate:o}=r,i=new L({getState:()=>this.state,setState:(g,P)=>this.setState(g,P)}),y={location:a,path:d,viewMode:c,singleStory:n,storyId:l,refId:p},S={docsOptions:s};this.state=i.getInitialState(U({...y,...S}));let u={navigate:o,store:i,provider:r.provider};this.modules=[Z,oe,te,B,re,ne,se,Se,de,ce,be,ge,he].map(g=>g.init({...y,...S,...u,state:this.state,fullAPI:this.api}));let f=U(this.state,...this.modules.map(g=>g.state)),m=Object.assign(this.api,{navigate:o},...this.modules.map(g=>g.api));this.state=f,this.api=m}static getDerivedStateFromProps(r,a){return a.path!==r.path?{...a,location:r.location,path:r.path,refId:r.refId,viewMode:r.viewMode,storyId:r.storyId}:null}shouldComponentUpdate(r,a){let d=this.state,p=this.props;return d!==a||p.path!==r.path}render(){let{children:r}=this.props,a={state:this.state,api:this.api};return M.createElement(Ho,{effect:this.initModules},M.createElement(Y.Provider,{value:a},M.createElement(_o,null,r)))}};Pe.displayName="Manager";var Ho=({children:e,effect:t})=>(M.useEffect(t,[]),e),Uo=e=>e;function _o({filter:e=Uo,children:t}){let r=xe(Y),a=Je(t),d=Je(e);if(typeof a.current!="function")return M.createElement(Lo,null,a.current);let p=d.current(r),c=ve(()=>[...Object.entries(p).reduce((n,l)=>n.concat(l),[])],[r.state]);return ve(()=>{let n=a.current;return M.createElement(n,{...p})},c)}function Tn(){let{state:e}=xe(Y);return e}function O(){let{api:e}=xe(Y);return e}function et(e,t){return typeof e>"u"?t:e}var $o=(e,t=[])=>{let r=O();return Fo(()=>(Object.entries(e).forEach(([a,d])=>r.on(a,d)),()=>{Object.entries(e).forEach(([a,d])=>r.off(a,d))}),t),r.emit};function An(e){return O().isPrepared(e)}function wn(e,t){let a=O().getCurrentParameter(e);return et(a,t)}var w={};function Ko(e,t){let r=O(),a=r.getAddonState(e),d=et(a,w[e]?w[e]:t),p=(l,s)=>{w[e]&&(w[e]=l),r.setAddonState(e,l,s)},c=ve(()=>{let l={[`${Ze}-client-${e}`]:o=>p(o),[`${H}-client-${e}`]:o=>p(o)},s={[Go]:()=>{let o=r.getAddonState(e);o?(w[e]=o,r.emit(`${H}-manager-${e}`,o)):w[e]?(p(w[e]),r.emit(`${H}-manager-${e}`,w[e])):t!==void 0&&(p(t),w[e]=t,r.emit(`${H}-manager-${e}`,t))},[jo]:()=>{let o=r.getAddonState(e);o!==void 0&&r.emit(`${H}-manager-${e}`,o)}};return{...l,...s}},[e]),n=$o(c);return[d,(l,s)=>{p(l,s),n(`${Ze}-manager-${e}`,l)}]}function Cn(e,t){return Ko(e,t)}function On(){let{getCurrentStoryData:e,updateStoryArgs:t,resetStoryArgs:r}=O(),a=e(),d=a.type==="story"?a.args:{},p=Xe(n=>t(a,n),[a,t]),c=Xe(n=>r(a,n),[a,r]);return[d,p,c]}function kn(){let e=O();return[e.getGlobals(),e.updateGlobals]}function Dn(){return O().getGlobalTypes()}function Bo(){let{getCurrentStoryData:e}=O();return e()}function Mn(){let e=Bo();return e?.type==="story"&&e.argTypes||{}}export{Rn as ActiveTabs,_o as Consumer,Y as ManagerContext,Pe as Provider,Le as combineParameters,R as merge,Cn as useAddonState,Mn as useArgTypes,On as useArgs,$o as useChannel,Dn as useGlobalTypes,kn as useGlobals,wn as useParameter,Ko as useSharedState,An as useStoryPrepared,O as useStorybookApi,Tn as useStorybookState};
