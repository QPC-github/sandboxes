import{a as I,g as Ie,h as Te}from"./chunk-WDQX4E6P.mjs";import N,{Component as Fo,Fragment as Vo,useCallback as Ze,useContext as Re,useEffect as jo,useMemo as Ee,useRef as et}from"react";import Go from"lodash/mergeWith";import{STORY_CHANGED as Ho,SHARED_STATE_CHANGED as tt,SHARED_STATE_SET as U,SET_STORIES as Uo}from"@storybook/core-events";import{createContext as rt}from"react";var Ae=({api:e,state:t})=>rt({api:e,state:t});import L from"store2";import{parse as nt,stringify as st}from"telejson";var we=e=>{e.fn("set",function(t,r){return e.set(this._area,this._in(t),st(r,{maxDepth:50}))}),e.fn("get",function(t,r){let a=e.get(this._area,this._in(t));return a!==null?nt(a):r||a})};we(L._);var Ce="@storybook/ui/store";function Z(e){return e.get(Ce)||{}}function at(e,t){return e.set(Ce,t)}function it(e,t){let r=Z(e);return at(e,{...r,...t})}var F=class{constructor({setState:t,getState:r}){this.upstreamSetState=t,this.upstreamGetState=r}getInitialState(t){return{...t,...Z(L.local),...Z(L.session)}}getState(){return this.upstreamGetState()}async setState(t,r,a){let l,p;typeof r=="function"?(l=r,p=a):p=r;let{persistence:c="none"}=p||{},n={},d={};typeof t=="function"?n=o=>(d=t(o),d):(n=t,d=n);let s=await new Promise(o=>{this.upstreamSetState(n,o)});if(c!=="none"){let o=c==="session"?L.session:L.local;await it(o,d)}return l&&l(s),s}};import ct from"lodash/mergeWith";import lt from"lodash/isEqual";import{logger as dt}from"@storybook/client-logger";var T=(e,t)=>ct({},e,t,(r,a)=>{if(Array.isArray(a)&&Array.isArray(r))return a.forEach(l=>{r.find(c=>c===l||lt(c,l))||r.push(l)}),r;if(Array.isArray(r))return dt.log(["the types mismatch, picking",r]),r});var pt=(...e)=>e.reduce((t,r)=>T(t,r),{}),_=pt;var ee={};I(ee,{init:()=>ut});var ut=({provider:e,fullAPI:t})=>({api:e.renderPreview?{renderPreview:e.renderPreview}:{},state:{},init:()=>{e.handleAPI(t)}});var oe={};I(oe,{ensurePanel:()=>te,init:()=>yt,types:()=>Oe});var Oe=(p=>(p.TAB="tab",p.PANEL="panel",p.TOOL="tool",p.PREVIEW="preview",p.NOTES_ELEMENT="notes-element",p))(Oe||{});function te(e,t,r){let a=Object.keys(e);return a.indexOf(t)>=0?t:a.length?a[0]:r}var yt=({provider:e,store:t,fullAPI:r})=>{let a={getElements:l=>e.getElements(l),getPanels:()=>a.getElements("panel"),getStoryPanels:()=>{let l=a.getPanels(),{storyId:p}=t.getState(),c=r.getData(p);if(!l||!c||c.type!=="story")return l;let{parameters:n}=c,d={};return Object.entries(l).forEach(([s,o])=>{let{paramKey:i}=o;i&&n&&n[i]&&n[i].disable||(d[s]=o)}),d},getSelectedPanel:()=>{let{selectedPanel:l}=t.getState();return te(a.getPanels(),l,l)},setSelectedPanel:l=>{t.setState({selectedPanel:l},{persistence:"session"})},setAddonState(l,p,c){let n,{addons:d}=t.getState();return typeof p=="function"?n=p(a.getAddonState(l)):n=p,t.setState({addons:{...d,[l]:n}},c).then(()=>a.getAddonState(l))},getAddonState:l=>t.getState().addons[l]};return{api:a,state:{selectedPanel:te(a.getPanels(),t.getState().selectedPanel),addons:{}}}};var re={};I(re,{init:()=>mt});import{STORIES_COLLAPSE_ALL as St,STORIES_EXPAND_ALL as ft}from"@storybook/core-events";var mt=({provider:e})=>{let t={getChannel:()=>e.channel,on:(r,a)=>(e.channel.addListener(r,a),()=>e.channel.removeListener(r,a)),off:(r,a)=>e.channel.removeListener(r,a),once:(r,a)=>e.channel.once(r,a),emit:(r,a,...l)=>{a?.options?.target&&a.options.target!=="storybook-preview-iframe"&&!a.options.target.startsWith("storybook-ref-")&&(a.options.target=a.options.target!=="storybook_internal"?`storybook-ref-${a.options.target}`:"storybook-preview-iframe"),e.channel.emit(r,a,...l)},collapseAll:()=>{e.channel.emit(St,{})},expandAll:()=>{t.emit(ft)}};return{api:t,state:{}}};var ne={};I(ne,{init:()=>gt});var gt=({store:e})=>{let t={addNotification:a=>{t.clearNotification(a.id);let{notifications:l}=e.getState();e.setState({notifications:[...l,a]})},clearNotification:a=>{let{notifications:l}=e.getState();e.setState({notifications:l.filter(c=>c.id!==a)});let p=l.find(c=>c.id===a);p&&p.onClear&&p.onClear()}};return{api:t,state:{notifications:[]}}};var se={};I(se,{init:()=>ht});var ht=({store:e,navigate:t,fullAPI:r})=>{let a=()=>{let{path:p}=r.getUrlState();return!!(p||"").match(/^\/settings/)};return{state:{settings:{lastTrackedStoryId:null}},api:{closeSettings:()=>{let{settings:{lastTrackedStoryId:p}}=e.getState();p?r.selectStory(p):r.selectFirstStory()},changeSettingsTab:p=>{t(`/settings/${p}`)},isSettingsScreenActive:a,navigateToSettingsPage:async p=>{if(!a()){let{settings:c,storyId:n}=e.getState();await e.setState({settings:{...c,lastTrackedStoryId:n}})}t(p)}}}};var ae={};I(ae,{init:()=>Et});import bt from"global";import Pt from"memoizerific";var{RELEASE_NOTES_DATA:vt}=bt,xt=Pt(1)(()=>{try{return{...JSON.parse(vt)||{}}}catch{return{}}}),Et=({store:e})=>{let t=xt(),r=()=>{let{releaseNotesViewed:l}=e.getState();return l||[]};return{state:{releaseNotesViewed:[]},api:{releaseNotesVersion:()=>t.currentVersion,setDidViewReleaseNotes:()=>{let l=r();l.includes(t.currentVersion)||e.setState({releaseNotesViewed:[...l,t.currentVersion]},{persistence:"permanent"})},showReleaseNotesOnLaunch:()=>{if(!t.currentVersion)return!1;let p=r().includes(t.currentVersion);return t.showOnFirstLaunch&&!p}}}};var ue={};I(ue,{init:()=>no});import Ut from"global";import{toId as K,sanitize as _e}from"@storybook/csf";import{PRELOAD_ENTRIES as _t,STORY_PREPARED as $t,UPDATE_STORY_ARGS as Kt,RESET_STORY_ARGS as Bt,STORY_ARGS_UPDATED as qt,STORY_CHANGED as Qt,SELECT_STORY as Wt,SET_STORIES as Yt,STORY_SPECIFIED as zt,STORY_INDEX_INVALIDATED as Xt,CONFIG_ERROR as Jt}from"@storybook/core-events";import Zt from"util-deprecate";import{logger as eo}from"@storybook/client-logger";import{logger as Ht}from"@storybook/client-logger";var de={};I(de,{defaultStoryMapper:()=>Ue,getSourceType:()=>le,init:()=>Gt});import He from"global";import{dedent as Lt}from"ts-dedent";import ke from"memoizerific";import De from"util-deprecate";import{dedent as ie}from"ts-dedent";import Rt from"lodash/mapValues";import It from"lodash/countBy";import Tt from"global";import{toId as At,sanitize as wt}from"@storybook/csf";var{FEATURES:Ct}=Tt,Ot=De(()=>{},ie`
    The 'showRoots' config option is deprecated and will be removed in Storybook 7.0. Use 'sidebar.showRoots' instead.
    Read more about it in the migration guide: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md
  `),kt=De(()=>{},ie`
    The default hierarchy separators changed in Storybook 6.0.
    '|' and '.' will no longer create a hierarchy, but codemods are available.
    Read more about it in the migration guide: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md
  `),Me=({globalParameters:e,kindParameters:t,stories:r})=>Rt(r,a=>({...a,parameters:Ve(e,t[a.kind],a.parameters)})),Dt=/\s*\/\s*/,$=(e,{provider:t,docsOptions:r})=>V(Mt(e,{docsOptions:r}),{provider:t,docsOptions:r}),Mt=(e,{docsOptions:t})=>{let r=new Set,a=Object.entries(e).reduce((l,[p,c])=>{if(!c)return l;let{docsOnly:n,fileName:d,...s}=c.parameters,o={title:c.kind,id:p,name:c.name,importPath:d};if(n)l[p]={type:"docs",storiesImports:[],...o};else{if(!r.has(o.title)&&t.docsPage){let S=t.defaultName,y=At(c.componentId||o.title,S);r.add(o.title),l[y]={type:"docs",storiesImports:[],...o,id:y,name:S}}let{argTypes:i,args:u,initialArgs:f}=c;l[p]={type:"story",...o,parameters:s,argTypes:i,args:u,initialArgs:f}}return l},{});return{v:4,entries:a}},Nt=e=>{let t=It(Object.values(e.stories),"title");return{v:4,entries:Object.values(e.stories).reduce((r,a)=>{let l="story";return(a.parameters?.docsOnly||a.name==="Page"&&t[a.title]===1)&&(l="docs"),r[a.id]={type:l,...l==="docs"&&{storiesImports:[]},...a},r},{})}},V=(e,{provider:t,docsOptions:r})=>{if(!e.v)throw new Error("Composition: Missing stories.json version");let a=e.v===4?e:Nt(e),l=Object.values(a.entries),{sidebar:p={},showRoots:c}=t.getConfig(),{showRoots:n=c,collapsedRoots:d=[],renderLabel:s}=p,o=l.some(({title:y})=>y.match(/\.|\|/));typeof c<"u"&&Ot();let i=typeof n<"u";o&&!i&&Ct?.warnOnLegacyHierarchySeparator&&kt();let u=Object.values(l).reduce((y,m)=>{if(r.docsMode&&m.type!=="docs")return y;let{title:g}=m,h=g.trim().split(Dt),v=(!i||n)&&h.length>1?[h.shift()]:[],E=[...v,...h],x=E.reduce((P,R,O)=>{let X=O>0&&P[O-1],J=wt(X?`${X}-${R}`:R);if(X===J)throw new Error(ie`
          Invalid part '${R}', leading to id === parentId ('${J}'), inside title '${g}'
          
          Did you create a path that uses the separator char accidentally, such as 'Vue <docs/>' where '/' is a separator char? See https://github.com/storybookjs/storybook/issues/6128
          `);return P.push(J),P},[]);return x.forEach((P,R)=>{let O=x[R+1]||m.id;v.length&&R===0?y[P]=T(y[P]||{},{type:"root",id:P,name:E[R],depth:R,renderLabel:s,startCollapsed:d.includes(P),children:[O],isRoot:!0,isComponent:!1,isLeaf:!1}):(!y[P]||y[P].type==="component")&&R===x.length-1?y[P]=T(y[P]||{},{type:"component",id:P,name:E[R],parent:x[R-1],depth:R,renderLabel:s,...O&&{children:[O]},isRoot:!1,isComponent:!0,isLeaf:!1}):y[P]=T(y[P]||{},{type:"group",id:P,name:E[R],parent:x[R-1],depth:R,renderLabel:s,...O&&{children:[O]},isRoot:!1,isComponent:!1,isLeaf:!1})}),y[m.id]={type:"story",...m,depth:x.length,parent:x[x.length-1],renderLabel:s,...m.type!=="docs"&&{prepared:!!m.parameters},kind:m.title,isRoot:!1,isComponent:!1,isLeaf:!0},y},{});function f(y,m){return y[m.id]||(y[m.id]=m,(m.type==="root"||m.type==="group"||m.type==="component")&&m.children.forEach(g=>f(y,u[g]))),y}let S=Object.values(u).filter(y=>y.type!=="root"&&!y.parent).reduce(f,{});return Object.values(u).filter(y=>y.type==="root").reduce(f,S)},Ne=(e,t)=>t?Object.fromEntries(Object.entries(e).map(([r,a])=>{let l=t[r];return a.type==="story"&&l?.type==="story"&&l.prepared?[r,{...l,...a,prepared:!0}]:[r,a]})):e,Le=ke(1)(e=>Object.entries(e).reduce((t,r)=>{let a=r[1];return a.type==="component"&&t.push([...a.children]),t},[])),Fe=ke(1)(e=>Object.keys(e).filter(t=>["story","docs"].includes(e[t].type)));var{location:Ft,fetch:je}=He,Ge=/(\/((?:[^\/]+?)\.[^\/]+?)|\/)$/,le=(e,t)=>{let{origin:r,pathname:a}=Ft,{origin:l,pathname:p}=new URL(e),c=`${r+a}`.replace(Ge,""),n=`${l+p}`.replace(Ge,"");return c===n?["local",n]:t||e?["external",n]:[null,null]},Ue=(e,t)=>({...t,kind:t.kind.replace("|","/")}),Vt=(e,t)=>Object.entries(e).reduce((r,[a,l])=>({...r,[a]:{...l,refId:t.id}}),{});async function ce(e){if(!e)return{};try{let t=await e;if(!t.ok)return{};let r=await t.json();return r.entries||r.stories?{storyIndex:r}:r}catch(t){return{error:t}}}var jt=(e,t,r)=>{let{storyMapper:a}=r;return a?Object.entries(e).reduce((l,[p,c])=>({...l,[p]:a(t,c)}),{}):e},Gt=({store:e,provider:t,singleStory:r,docsOptions:a={}},{runCheck:l=!0}={})=>{let p={findRef:d=>{let s=p.getRefs();return Object.values(s).find(({url:o})=>o.match(d))},changeRefVersion:(d,s)=>{let{versions:o,title:i}=p.getRefs()[d],u={id:d,url:s,versions:o,title:i,stories:{}};p.checkRef(u)},changeRefState:(d,s)=>{let{[d]:o,...i}=p.getRefs();i[d]={...o,ready:s},e.setState({refs:i})},checkRef:async d=>{let{id:s,url:o,version:i,type:u}=d,f=u==="server-checked",S={},y=i?`?version=${i}`:"",m=f?"omit":"include",[g,h]=await Promise.all(["index.json","stories.json"].map(async E=>je(`${o}/${E}${y}`,{headers:{Accept:"application/json"},credentials:m})));if(g.ok||h.ok){let[E,x]=await Promise.all([g.ok?ce(g):ce(h),ce(je(`${o}/metadata.json${y}`,{headers:{Accept:"application/json"},credentials:m,cache:"no-cache"}).catch(()=>!1))]);Object.assign(S,{...E,...x})}else f||(S.error={message:Lt`
            Error: Loading of ref failed
              at fetch (lib/api/src/modules/refs.ts)

            URL: ${o}

            We weren't able to load the above URL,
            it's possible a CORS error happened.

            Please check your dev-tools network tab.
          `});let v=d.versions&&Object.keys(d.versions).length?d.versions:S.versions;await p.setRef(s,{id:s,url:o,...S,...v?{versions:v}:{},type:S.storyIndex?"lazy":"auto-inject"})},getRefs:()=>{let{refs:d={}}=e.getState();return d},setRef:(d,{storyIndex:s,setStoriesData:o,...i},u=!1)=>{if(r)return;let{storyMapper:f=Ue}=t.getConfig(),S=p.getRefs()[d],y;o?y=$(jt(o,S,{storyMapper:f}),{provider:t,docsOptions:a}):s&&(y=V(s,{provider:t,docsOptions:a})),y&&(y=Vt(y,S)),p.updateRef(d,{stories:y,...i,ready:u})},updateRef:(d,s)=>{let{[d]:o,...i}=p.getRefs();i[d]={...o,...s};let u=Object.keys(n).reduce((f,S)=>(f[S]=i[S],f),{});e.setState({refs:u})}},c=!r&&He.REFS||{},n=c;return l&&Object.entries(c).forEach(([d,s])=>{p.checkRef({...s,stories:{}})}),{api:p,state:{refs:n}}};var A=(e,t)=>{let{source:r,refId:a,type:l}=e,[p,c]=le(r,a),n=a&&t.getRefs()[a]?t.getRefs()[a]:t.findRef(c),d={source:r,sourceType:p,sourceLocation:c,refId:a,ref:n,type:l};switch(!0){case typeof a=="string":case p==="local":case p==="external":return d;default:return Ht.warn(`Received a ${l} frame that was not configured as a ref`),null}};var{FEATURES:to,fetch:oo}=Ut,ro="./index.json",$e=["enableShortcuts","theme","showRoots"].reduce((e,t)=>(e[t]=Zt(()=>{},`parameters.options.${t} is deprecated and will be removed in Storybook 7.0.
To change this setting, use \`addons.setConfig\`. See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-immutable-options-parameters
  `),e),{});function pe(e){!e||Object.keys(e).forEach(t=>{$e[t]&&$e[t]()})}var no=({fullAPI:e,store:t,navigate:r,provider:a,storyId:l,viewMode:p,docsOptions:c={}})=>{let n={storyId:K,getData:(s,o)=>{let i=n.resolveStory(s,o);if(i?.type==="story"||i?.type==="docs")return i},isPrepared:(s,o)=>{let i=n.getData(s,o);return i.type==="story"?i.prepared:!0},resolveStory:(s,o)=>{let{refs:i,storiesHash:u}=t.getState();return o?i[o].stories?i[o].stories[s]:void 0:u?u[s]:void 0},getCurrentStoryData:()=>{let{storyId:s,refId:o}=t.getState();return n.getData(s,o)},getParameters:(s,o)=>{let{storyId:i,refId:u}=typeof s=="string"?{storyId:s,refId:void 0}:s,f=n.getData(i,u);if(f?.type==="story"){let{parameters:S}=f;if(S)return o?S[o]:S}return null},getCurrentParameter:s=>{let{storyId:o,refId:i}=t.getState();return n.getParameters({storyId:o,refId:i},s)||void 0},jumpToComponent:s=>{let{storiesHash:o,storyId:i,refs:u,refId:f}=t.getState();if(!n.getData(i,f))return;let y=f?u[f].stories||{}:o,m=n.findSiblingStoryId(i,y,s,!0);m&&n.selectStory(m,void 0,{ref:f})},jumpToStory:s=>{let{storiesHash:o,storyId:i,refs:u,refId:f}=t.getState(),S=n.getData(i,f);if(!S)return;let y=S.refId?u[S.refId].stories:o,m=n.findSiblingStoryId(i,y,s,!1);m&&n.selectStory(m,void 0,{ref:f})},setStories:async(s,o)=>{let i=$(s,{provider:a,docsOptions:c});await t.setState({storiesHash:i,storiesConfigured:!0,storiesFailed:o})},selectFirstStory:()=>{let{storiesHash:s}=t.getState(),o=Object.keys(s).find(i=>s[i].type==="story");if(o){n.selectStory(o);return}r("/")},selectStory:(s=void 0,o=void 0,i={})=>{let{ref:u}=i,{storyId:f,storiesHash:S,refs:y}=t.getState(),m=u?y[u].stories:S,g=f?.split("--",2)[0];if(o)if(s){let h=u?`${u}_${K(s,o)}`:K(s,o);if(m[h])n.selectStory(h,void 0,i);else{let v=m[_e(s)];if(v?.type==="component"){let E=v.children.find(x=>m[x].name===o);E&&n.selectStory(E,void 0,i)}}}else{let h=K(g,o);n.selectStory(h,void 0,i)}else{let h=s?m[s]||m[_e(s)]:m[g];if(!h)throw new Error(`Unknown id or title: '${s}'`);let v=n.findLeafEntry(m,h.id),E=v.refId?`${v.refId}_${v.id}`:v.id;r(`/${v.type}/${E}`)}},findLeafEntry(s,o){let i=s[o];if(i.type==="docs"||i.type==="story")return i;let u=i.children[0];return n.findLeafEntry(s,u)},findLeafStoryId(s,o){return n.findLeafEntry(s,o)?.id},findSiblingStoryId(s,o,i,u){if(u){let y=Le(o),m=y.findIndex(g=>g.includes(s));return m===y.length-1&&i>0||m===0&&i<0?void 0:y[m+i]?y[m+i][0]:void 0}let f=Fe(o),S=f.indexOf(s);if(!(S===f.length-1&&i>0)&&!(S===0&&i<0))return f[S+i]},updateStoryArgs:(s,o)=>{let{id:i,refId:u}=s;e.emit(Kt,{storyId:i,updatedArgs:o,options:{target:u}})},resetStoryArgs:(s,o)=>{let{id:i,refId:u}=s;e.emit(Bt,{storyId:i,argNames:o,options:{target:u}})},fetchStoryList:async()=>{try{let s=await oo(ro);if(s.status!==200)throw new Error(await s.text());let o=await s.json();if(o.v<3){eo.warn(`Skipping story index with version v${o.v}, awaiting SET_STORIES.`);return}await e.setStoryList(o)}catch(s){t.setState({storiesConfigured:!0,storiesFailed:s})}},setStoryList:async s=>{let o=V(s,{provider:a,docsOptions:c}),i=t.getState().storiesHash;await t.setState({storiesHash:Ne(o,i),storiesConfigured:!0,storiesFailed:null})},updateStory:async(s,o,i)=>{if(i){let{id:u,stories:f}=i;f[s]={...f[s],...o},await e.updateRef(u,{stories:f})}else{let{storiesHash:u}=t.getState();u[s]={...u[s],...o},await t.setState({storiesHash:u})}}};return{api:n,state:{storiesHash:{},storyId:l,viewMode:p,storiesConfigured:!1,hasCalledSetOptions:!1},init:async()=>{e.on(zt,function({storyId:o,viewMode:i}){let{sourceType:u}=A(this,e);if(!e.isSettingsScreenActive()&&u==="local"){let f=t.getState();(f.storyId!==o||f.viewMode!==i)&&r(`/${i}/${o}`)}}),e.on(Qt,function(){let{sourceType:o}=A(this,e);if(o==="local"){let i=e.getCurrentParameter("options");i&&(pe(i),e.setOptions(i))}}),e.on($t,function({id:o,...i}){let{ref:u,sourceType:f}=A(this,e);if(e.updateStory(o,{...i,prepared:!0},u),u)e.updateRef(u.id,{ready:!0});else if(!t.getState().hasCalledSetOptions){let{options:S}=i.parameters;pe(S),e.setOptions(S),t.setState({hasCalledSetOptions:!0})}if(f==="local"){let{storyId:S,storiesHash:y,refId:m}=t.getState(),g=Array.from(new Set([n.findSiblingStoryId(S,y,1,!0),n.findSiblingStoryId(S,y,-1,!0)])).filter(Boolean);e.emit(_t,{ids:g,options:{target:m}})}}),e.on(Yt,function(o){let{ref:i}=A(this,e),u=o.v?Me(o):o.stories;if(i)e.setRef(i.id,{...i,setStoriesData:u},!0);else{if(!o.v)throw new Error("Unexpected legacy SET_STORIES event from local source");e.setStories(u);let f=e.getCurrentParameter("options");pe(f),e.setOptions(f)}}),e.on(Wt,function({kind:o,story:i,storyId:u,...f}){let{ref:S}=A(this,e);S?e.selectStory(u||o,i,{...f,ref:S.id}):e.selectStory(u||o,i,f)}),e.on(qt,function({storyId:o,args:i}){let{ref:u}=A(this,e);e.updateStory(o,{args:i},u)}),e.on(Jt,function(o){t.setState({storiesConfigured:!0,storiesFailed:o})}),to?.storyStoreV7&&(a.serverChannel?.on(Xt,()=>e.fetchStoryList()),await e.fetchStoryList())}}};var q={};I(q,{ActiveTabs:()=>Ke,focusableUIElements:()=>G,init:()=>uo});import so from"global";import j from"lodash/pick";import{dequal as B}from"dequal";import{create as ao}from"@storybook/theming/create";import{SET_CONFIG as io}from"@storybook/core-events";import{once as co}from"@storybook/client-logger";import{dedent as lo}from"ts-dedent";var{document:po}=so,Ke={SIDEBAR:"sidebar",CANVAS:"canvas",ADDONS:"addons"},D={ui:{enableShortcuts:!0},layout:{initialActive:Ke.CANVAS,showToolbar:!0,isFullscreen:!1,showPanel:!0,showNav:!0,panelPosition:"bottom",showTabs:!0},selectedPanel:void 0,theme:ao()},G={storySearchField:"storybook-explorer-searchfield",storyListMenu:"storybook-explorer-menu",storyPanelRoot:"storybook-panel-root"},uo=({store:e,provider:t,singleStory:r,fullAPI:a})=>{let l={toggleFullscreen(c){return e.setState(n=>{let{showNav:d}=n.layout,s=typeof c=="boolean"?c:!n.layout.isFullscreen,o=d===!1&&s===!1;return{layout:{...n.layout,isFullscreen:s,showNav:!r&&o?!0:d}}},{persistence:"session"})},togglePanel(c){return e.setState(n=>{let{showNav:d,isFullscreen:s}=n.layout,o=typeof c<"u"?c:!n.layout.showPanel,i=d===!1&&o===!1;return{layout:{...n.layout,showPanel:o,isFullscreen:i?!0:s}}},{persistence:"session"})},togglePanelPosition(c){return typeof c<"u"?e.setState(n=>({layout:{...n.layout,panelPosition:c}}),{persistence:"permanent"}):e.setState(n=>({layout:{...n.layout,panelPosition:n.layout.panelPosition==="right"?"bottom":"right"}}),{persistence:"permanent"})},toggleNav(c){return e.setState(n=>{if(r)return{layout:n.layout};let{showPanel:d,isFullscreen:s}=n.layout,o=typeof c<"u"?c:!n.layout.showNav,i=d===!1&&o===!1;return{layout:{...n.layout,showNav:o,isFullscreen:i?!0:!o&&s}}},{persistence:"session"})},toggleToolbar(c){return e.setState(n=>{let d=typeof c<"u"?c:!n.layout.showToolbar;return{layout:{...n.layout,showToolbar:d}}},{persistence:"session"})},resetLayout(){return e.setState(c=>({layout:{...c.layout,showNav:!1,showPanel:!1,isFullscreen:!1}}),{persistence:"session"})},focusOnUIElement(c,n){if(!c)return;let d=po.getElementById(c);d&&(d.focus(),n&&d.select())},getInitialOptions(){let{theme:c,selectedPanel:n,...d}=t.getConfig();return d.layout?.isToolshown!==void 0&&(co.warn(lo`
          The "isToolshown" option is deprecated. Please use "showToolbar" instead.

          See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#renamed-istoolshown-to-showtoolbar
        `),d.layout.showToolbar=d.layout.isToolshown),{...D,layout:{...D.layout,...j(d,Object.keys(D.layout)),...r&&{showNav:!1}},ui:{...D.ui,...j(d,Object.keys(D.ui))},selectedPanel:n||D.selectedPanel,theme:c||D.theme}},setOptions:c=>{let{layout:n,ui:d,selectedPanel:s,theme:o}=e.getState();if(c){let i={...n,...j(c,Object.keys(n)),...r&&{showNav:!1}},u={...d,...j(c,Object.keys(d))},f={...o,...c.theme},S={};B(d,u)||(S.ui=u),B(n,i)||(S.layout=i),c.selectedPanel&&!B(s,c.selectedPanel)&&(S.selectedPanel=c.selectedPanel),Object.keys(S).length&&e.setState(S,{persistence:"permanent"}),B(o,f)||e.setState({theme:f})}}},p=j(e.getState(),"layout","ui","selectedPanel");return{api:l,state:T(l.getInitialOptions(),p),init:()=>{l.setOptions(T(l.getInitialOptions(),p)),a.on(io,()=>{l.setOptions(T(l.getInitialOptions(),p))})}}};var me={};I(me,{controlOrMetaKey:()=>Q,defaultShortcuts:()=>M,init:()=>mo,isMacLike:()=>qe,keys:()=>fe});import yo from"global";import{PREVIEW_KEYDOWN as So}from"@storybook/core-events";var{navigator:ye,document:Be}=yo,qe=()=>ye&&ye.platform?!!ye.platform.match(/(Mac|iPhone|iPod|iPad)/i):!1,Q=()=>qe()?"meta":"control";function fe(e){return Object.keys(e)}var M=Object.freeze({fullScreen:["F"],togglePanel:["A"],panelPosition:["D"],toggleNav:["S"],toolbar:["T"],search:["/"],focusNav:["1"],focusIframe:["2"],focusPanel:["3"],prevComponent:["alt","ArrowUp"],nextComponent:["alt","ArrowDown"],prevStory:["alt","ArrowLeft"],nextStory:["alt","ArrowRight"],shortcutsPage:[Q(),"shift",","],aboutPage:[","],escape:["escape"],collapseAll:[Q(),"shift","ArrowUp"],expandAll:[Q(),"shift","ArrowDown"]}),Se={};function fo(e){return/input|textarea/i.test(e.target.tagName)||e.target.getAttribute("contenteditable")!==null}var mo=({store:e,fullAPI:t})=>{let r={getShortcutKeys(){return e.getState().shortcuts},getDefaultShortcuts(){return{...M,...r.getAddonsShortcutDefaults()}},getAddonsShortcuts(){return Se},getAddonsShortcutLabels(){let c={};return Object.entries(r.getAddonsShortcuts()).forEach(([n,{label:d}])=>{c[n]=d}),c},getAddonsShortcutDefaults(){let c={};return Object.entries(r.getAddonsShortcuts()).forEach(([n,{defaultShortcut:d}])=>{c[n]=d}),c},async setShortcuts(c){return await e.setState({shortcuts:c},{persistence:"permanent"}),c},async restoreAllDefaultShortcuts(){return r.setShortcuts(r.getDefaultShortcuts())},async setShortcut(c,n){let d=r.getShortcutKeys();return await r.setShortcuts({...d,[c]:n}),n},async setAddonShortcut(c,n){let d=r.getShortcutKeys();return await r.setShortcuts({...d,[`${c}-${n.actionName}`]:n.defaultShortcut}),Se[`${c}-${n.actionName}`]=n,n},async restoreDefaultShortcut(c){let n=r.getDefaultShortcuts()[c];return r.setShortcut(c,n)},handleKeydownEvent(c){let n=Ie(c),d=r.getShortcutKeys(),o=fe(d).find(i=>Te(n,d[i]));o&&(c?.preventDefault&&c.preventDefault(),r.handleShortcutFeature(o))},handleShortcutFeature(c){let{layout:{isFullscreen:n,showNav:d,showPanel:s},ui:{enableShortcuts:o}}=e.getState();if(!!o)switch(c){case"escape":{n?t.toggleFullscreen():d||t.toggleNav();break}case"focusNav":{n&&t.toggleFullscreen(),d||t.toggleNav(),t.focusOnUIElement(G.storyListMenu);break}case"search":{n&&t.toggleFullscreen(),d||t.toggleNav(),setTimeout(()=>{t.focusOnUIElement(G.storySearchField,!0)},0);break}case"focusIframe":{let i=Be.getElementById("storybook-preview-iframe");if(i)try{i.contentWindow.focus()}catch{}break}case"focusPanel":{n&&t.toggleFullscreen(),s||t.togglePanel(),t.focusOnUIElement(G.storyPanelRoot);break}case"nextStory":{t.jumpToStory(1);break}case"prevStory":{t.jumpToStory(-1);break}case"nextComponent":{t.jumpToComponent(1);break}case"prevComponent":{t.jumpToComponent(-1);break}case"fullScreen":{t.toggleFullscreen();break}case"togglePanel":{n&&(t.toggleFullscreen(),t.resetLayout()),t.togglePanel();break}case"toggleNav":{n&&(t.toggleFullscreen(),t.resetLayout()),t.toggleNav();break}case"toolbar":{t.toggleToolbar();break}case"panelPosition":{n&&t.toggleFullscreen(),s||t.togglePanel(),t.togglePanelPosition();break}case"aboutPage":{t.navigate("/settings/about");break}case"shortcutsPage":{t.navigate("/settings/shortcuts");break}case"collapseAll":{t.collapseAll();break}case"expandAll":{t.expandAll();break}default:Se[c].action();break}}},{shortcuts:a=M}=e.getState(),l={shortcuts:fe(M).reduce((c,n)=>({...c,[n]:a[n]||M[n]}),M)};return{api:r,state:l,init:()=>{Be.addEventListener("keydown",c=>{fo(c)||t.handleKeydownEvent(c)}),t.on(So,c=>{t.handleKeydownEvent(c.event)})}}};var be={};I(be,{init:()=>Ao});import{once as W}from"@storybook/client-logger";import{NAVIGATE_URL as go,STORY_ARGS_UPDATED as ho,SET_CURRENT_STORY as bo,GLOBALS_UPDATED as Po,UPDATE_QUERY_PARAMS as vo}from"@storybook/core-events";import{queryFromLocation as xo,buildArgsParam as Qe}from"@storybook/router";import{toId as Eo,sanitize as Ro}from"@storybook/csf";import{dequal as We}from"dequal";import Io from"global";import{dedent as Y}from"ts-dedent";var{window:ge}=Io,H=e=>{if(e==="true"||e==="1")return!0;if(e==="false"||e==="0")return!1},he,To=({state:{location:e,path:t,viewMode:r,storyId:a},singleStory:l})=>{let{full:p,panel:c,nav:n,shortcuts:d,addonPanel:s,tabs:o,addons:i,panelRight:u,stories:f,selectedKind:S,selectedStory:y,path:m,...g}=xo(e),h={isFullscreen:H(p),showNav:!l&&H(n),showPanel:H(c),panelPosition:["right","bottom"].includes(c)?c:void 0,showTabs:H(o)},v={enableShortcuts:H(d)},E=s||void 0;i==="0"&&(W.warn(Y`
      The 'addons' query param is deprecated and will be removed in Storybook 7.0. Use 'panel=false' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),h.showPanel=!1),u==="1"&&(W.warn(Y`
      The 'panelRight' query param is deprecated and will be removed in Storybook 7.0. Use 'panel=right' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),h.panelPosition="right"),f==="0"&&(W.warn(Y`
      The 'stories' query param is deprecated and will be removed in Storybook 7.0. Use 'nav=false' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),h.showNav=!1);let x=a;!x&&S&&(W.warn(Y`
      The 'selectedKind' and 'selectedStory' query params are deprecated and will be removed in Storybook 7.0. Use 'path' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),x=y?Eo(S,y):Ro(S));let P=We(he,g)?he:g;return he=P,{viewMode:r,layout:h,ui:v,selectedPanel:E,location:e,path:t,customQueryParams:P,storyId:x}},Ao=({store:e,navigate:t,state:r,provider:a,fullAPI:l,...p})=>{let c=(s,o={},i={})=>{let u=Object.entries(o).filter(([,S])=>S).sort(([S],[y])=>S<y?-1:1).map(([S,y])=>`${S}=${y}`),f=[s,...u].join("&");return t(f,i)},n={getQueryParam(s){let{customQueryParams:o}=e.getState();return o?o[s]:void 0},getUrlState(){let{path:s,customQueryParams:o,storyId:i,url:u,viewMode:f}=e.getState();return{path:s,queryParams:o,storyId:i,url:u,viewMode:f}},setQueryParams(s){let{customQueryParams:o}=e.getState(),i={},u={...o,...Object.entries(s).reduce((f,[S,y])=>(y!==null&&(f[S]=y),f),i)};We(o,u)||(e.setState({customQueryParams:u}),l.emit(vo,u))},navigateUrl(s,o){t(s,{...o,plain:!0})}},d=()=>{let s=()=>{let{path:i,queryParams:u,viewMode:f}=l.getUrlState();if(f!=="story")return;let S=l.getCurrentStoryData();if(S?.type!=="story")return;let{args:y,initialArgs:m}=S,g=Qe(m,y);c(i,{...u,args:g},{replace:!0}),n.setQueryParams({args:g})};l.on(bo,()=>s());let o;l.on(ho,()=>{"requestIdleCallback"in ge?(o&&ge.cancelIdleCallback(o),o=ge.requestIdleCallback(s,{timeout:1e3})):(o&&clearTimeout(o),setTimeout(s,100))}),l.on(Po,({globals:i,initialGlobals:u})=>{let{path:f,queryParams:S}=l.getUrlState(),y=Qe(u,i);c(f,{...S,globals:y},{replace:!0}),n.setQueryParams({globals:y})}),l.on(go,(i,u)=>{l.navigateUrl(i,u)}),l.showReleaseNotesOnLaunch()&&t("/settings/release-notes")};return{api:n,state:To({store:e,navigate:t,state:r,provider:a,fullAPI:l,...p}),init:d}};var Pe={};I(Pe,{init:()=>ko});import wo from"global";import w from"semver";import Co from"memoizerific";var Ye="7.0.0-alpha.35";var{VERSIONCHECK:Oo}=wo,ze=Co(1)(()=>{try{return{...JSON.parse(Oo).data||{}}}catch{return{}}}),ko=({store:e,mode:t,fullAPI:r})=>{let{dismissedVersionNotification:a}=e.getState(),l={versions:{current:{version:Ye},...ze()},dismissedVersionNotification:a},p={getCurrentVersion:()=>{let{versions:{current:n}}=e.getState();return n},getLatestVersion:()=>{let{versions:{latest:n,next:d,current:s}}=e.getState();return s&&w.prerelease(s.version)&&d?n&&w.gt(n.version,d.version)?n:d:n},versionUpdateAvailable:()=>{let n=p.getLatestVersion(),d=p.getCurrentVersion();if(n){if(!n.version||!d.version)return!0;let o=!!w.prerelease(d.version)?`${w.major(d.version)}.${w.minor(d.version)}.${w.patch(d.version)}`:d.version,i=w.diff(o,n.version);return w.gt(n.version,o)&&i!=="patch"&&!i.includes("pre")}return!1}};return{init:async()=>{let{versions:n={}}=e.getState(),{latest:d,next:s}=ze();if(await e.setState({versions:{...n,latest:d,next:s}}),p.versionUpdateAvailable()){let o=p.getLatestVersion().version,i=w.diff(n.current.version,n.latest.version);o!==a&&i!=="patch"&&!w.prerelease(o)&&t!=="production"&&r.addNotification({id:"update",link:"/settings/about",content:{headline:`Storybook ${o} is available!`,subHeadline:`Your current version is: ${n.current.version}`},icon:{name:"book"},onClear(){e.setState({dismissedVersionNotification:o},{persistence:"permanent"})}})}},state:l,api:p}};var ve={};I(ve,{init:()=>Lo});import{SET_GLOBALS as Do,UPDATE_GLOBALS as Mo,GLOBALS_UPDATED as No}from"@storybook/core-events";import{logger as Xe}from"@storybook/client-logger";import{dequal as Je}from"dequal";var Lo=({store:e,fullAPI:t})=>{let r={getGlobals(){return e.getState().globals},getGlobalTypes(){return e.getState().globalTypes},updateGlobals(c){t.emit(Mo,{globals:c,options:{target:"storybook-preview-iframe"}})}},a={globals:{},globalTypes:{}},l=c=>{let n=e.getState()?.globals;Je(c,n)||e.setState({globals:c})};return{api:r,state:a,init:()=>{t.on(No,function({globals:n}){let{ref:d}=A(this,t);d?Xe.warn("received a GLOBALS_UPDATED from a non-local ref. This is not currently supported."):l(n)}),t.on(Do,function({globals:n,globalTypes:d}){let{ref:s}=A(this,t),o=e.getState()?.globals;s?Object.keys(n).length>0&&Xe.warn("received globals from a non-local ref. This is not currently supported."):e.setState({globals:n,globalTypes:d}),o&&Object.keys(o).length!==0&&!Je(n,o)&&r.updateGlobals(o)})}}};var{ActiveTabs:Tn}=q;var z=Ae({api:void 0,state:_({})}),Ve=(...e)=>Go({},...e,(t,r)=>{if(Array.isArray(r))return r}),xe=class extends Fo{constructor(r){super(r);this.api={};this.initModules=()=>{this.modules.forEach(r=>{"init"in r&&r.init()})};let{location:a,path:l,refId:p,viewMode:c=r.docsOptions.docsMode?"docs":"story",singleStory:n,storyId:d,docsOptions:s,navigate:o}=r,i=new F({getState:()=>this.state,setState:(g,h)=>this.setState(g,h)}),u={location:a,path:l,viewMode:c,singleStory:n,storyId:d,refId:p},f={docsOptions:s};this.state=i.getInitialState(_({...u,...f}));let S={navigate:o,store:i,provider:r.provider};this.modules=[ee,re,oe,q,ne,se,ae,me,ue,de,ve,be,Pe].map(g=>g.init({...u,...f,...S,state:this.state,fullAPI:this.api}));let y=_(this.state,...this.modules.map(g=>g.state)),m=Object.assign(this.api,{navigate:o},...this.modules.map(g=>g.api));this.state=y,this.api=m}static getDerivedStateFromProps(r,a){return a.path!==r.path?{...a,location:r.location,path:r.path,refId:r.refId,viewMode:r.viewMode,storyId:r.storyId}:null}shouldComponentUpdate(r,a){let l=this.state,p=this.props;return l!==a||p.path!==r.path}render(){let{children:r}=this.props,a={state:this.state,api:this.api};return N.createElement(_o,{effect:this.initModules},N.createElement(z.Provider,{value:a},N.createElement(Ko,null,r)))}};xe.displayName="Manager";var _o=({children:e,effect:t})=>(N.useEffect(t,[]),e),$o=e=>e;function Ko({filter:e=$o,children:t}){let r=Re(z),a=et(t),l=et(e);if(typeof a.current!="function")return N.createElement(Vo,null,a.current);let p=l.current(r),c=Ee(()=>[...Object.entries(p).reduce((n,d)=>n.concat(d),[])],[r.state]);return Ee(()=>{let n=a.current;return N.createElement(n,{...p})},c)}function An(){let{state:e}=Re(z);return e}function k(){let{api:e}=Re(z);return e}function ot(e,t){return typeof e>"u"?t:e}var Bo=(e,t=[])=>{let r=k();return jo(()=>(Object.entries(e).forEach(([a,l])=>r.on(a,l)),()=>{Object.entries(e).forEach(([a,l])=>r.off(a,l))}),t),r.emit};function wn(e){return k().isPrepared(e)}function Cn(e,t){let a=k().getCurrentParameter(e);return ot(a,t)}var C={};function qo(e,t){let r=k(),a=r.getAddonState(e),l=ot(a,C[e]?C[e]:t),p=(d,s)=>{C[e]&&(C[e]=d),r.setAddonState(e,d,s)},c=Ee(()=>{let d={[`${tt}-client-${e}`]:o=>p(o),[`${U}-client-${e}`]:o=>p(o)},s={[Uo]:()=>{let o=r.getAddonState(e);o?(C[e]=o,r.emit(`${U}-manager-${e}`,o)):C[e]?(p(C[e]),r.emit(`${U}-manager-${e}`,C[e])):t!==void 0&&(p(t),C[e]=t,r.emit(`${U}-manager-${e}`,t))},[Ho]:()=>{let o=r.getAddonState(e);o!==void 0&&r.emit(`${U}-manager-${e}`,o)}};return{...d,...s}},[e]),n=Bo(c);return[l,(d,s)=>{p(d,s),n(`${tt}-manager-${e}`,d)}]}function On(e,t){return qo(e,t)}function kn(){let{getCurrentStoryData:e,updateStoryArgs:t,resetStoryArgs:r}=k(),a=e(),l=a.type==="story"?a.args:{},p=Ze(n=>t(a,n),[a,t]),c=Ze(n=>r(a,n),[a,r]);return[l,p,c]}function Dn(){let e=k();return[e.getGlobals(),e.updateGlobals]}function Mn(){return k().getGlobalTypes()}function Qo(){let{getCurrentStoryData:e}=k();return e()}function Nn(){let e=Qo();return e?.type==="story"&&e.argTypes||{}}export{Tn as ActiveTabs,Ko as Consumer,z as ManagerContext,xe as Provider,Ve as combineParameters,T as merge,On as useAddonState,Nn as useArgTypes,kn as useArgs,Bo as useChannel,Mn as useGlobalTypes,Dn as useGlobals,Cn as useParameter,qo as useSharedState,wn as useStoryPrepared,k as useStorybookApi,An as useStorybookState};
