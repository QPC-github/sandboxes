import {
  __require
} from "./chunk-YQ7GSRLJ.mjs";

// src/framework-preset-react-dom-hack.ts
import { readJSON } from "fs-extra";
import { IgnorePlugin } from "webpack";
var webpackFinal = async (config) => {
  const reactDomPkg = await readJSON(__require.resolve("react-dom/package.json"));
  return {
    ...config,
    plugins: [
      ...config.plugins || [],
      reactDomPkg?.version?.startsWith("18") || reactDomPkg?.version?.startsWith("0.0.0") ? null : new IgnorePlugin({
        resourceRegExp: /react-dom\/client$/,
        contextRegExp: /(renderers\/react|renderers\\react|@storybook\/react|@storybook\\react)/
      })
    ].filter(Boolean)
  };
};
export {
  webpackFinal
};
