var jt=Object.create;var J=Object.defineProperty;var Vt=Object.getOwnPropertyDescriptor;var Gt=Object.getOwnPropertyNames;var Ht=Object.getPrototypeOf,Ut=Object.prototype.hasOwnProperty;var A=(e,t)=>{for(var o in t)J(e,o,{get:t[o],enumerable:!0})},Ue=(e,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of Gt(t))!Ut.call(e,l)&&l!==o&&J(e,l,{get:()=>t[l],enumerable:!(i=Vt(t,l))||i.enumerable});return e};var P=(e,t,o)=>(o=e!=null?jt(Ht(e)):{},Ue(t||!e||!e.__esModule?J(o,"default",{value:e,enumerable:!0}):o,e)),Kt=e=>Ue(J({},"__esModule",{value:!0}),e);var No={};A(No,{ActiveTabs:()=>xo,Consumer:()=>Dt,ManagerContext:()=>z,Provider:()=>ie,combineParameters:()=>ve,merge:()=>C,useAddonState:()=>To,useArgTypes:()=>Do,useArgs:()=>Co,useChannel:()=>Lt,useGlobalTypes:()=>ko,useGlobals:()=>Oo,useParameter:()=>Ao,useSharedState:()=>Ft,useStoryPrepared:()=>Io,useStorybookApi:()=>N,useStorybookState:()=>wo});module.exports=Kt(No);var h=P(require("react")),Mt=P(require("lodash/mergeWith")),T=require("@storybook/core-events");var Ke=require("react"),_e=({api:e,state:t})=>(0,Ke.createContext)({api:e,state:t});var V=P(require("store2"));var X=require("telejson"),$e=e=>{e.fn("set",function(t,o){return e.set(this._area,this._in(t),(0,X.stringify)(o,{maxDepth:50}))}),e.fn("get",function(t,o){let i=e.get(this._area,this._in(t));return i!==null?(0,X.parse)(i):o||i})};$e(V.default._);var Be="@storybook/ui/store";function pe(e){return e.get(Be)||{}}function _t(e,t){return e.set(Be,t)}function $t(e,t){let o=pe(e);return _t(e,{...o,...t})}var K=class{constructor({setState:t,getState:o}){this.upstreamSetState=t,this.upstreamGetState=o}getInitialState(t){return{...t,...pe(V.default.local),...pe(V.default.session)}}getState(){return this.upstreamGetState()}async setState(t,o,i){let l,d;typeof o=="function"?(l=o,d=i):d=o;let{persistence:c="none"}=d||{},n={},p={};typeof t=="function"?n=r=>(p=t(r),p):(n=t,p=n);let s=await new Promise(r=>{this.upstreamSetState(n,r)});if(c!=="none"){let r=c==="session"?V.default.session:V.default.local;await $t(r,p)}return l&&l(s),s}};var qe=P(require("lodash/mergeWith")),Qe=P(require("lodash/isEqual")),We=require("@storybook/client-logger"),C=(e,t)=>(0,qe.default)({},e,t,(o,i)=>{if(Array.isArray(i)&&Array.isArray(o))return i.forEach(l=>{o.find(c=>c===l||(0,Qe.default)(c,l))||o.push(l)}),o;if(Array.isArray(o))return We.logger.log(["the types mismatch, picking",o]),o});var Bt=(...e)=>e.reduce((t,o)=>C(t,o),{}),Z=Bt;var de={};A(de,{init:()=>qt});var qt=({provider:e,fullAPI:t})=>({api:e.renderPreview?{renderPreview:e.renderPreview}:{},state:{},init:()=>{e.handleAPI(t)}});var ye={};A(ye,{ensurePanel:()=>ue,init:()=>Qt,types:()=>Ye});var Ye=(d=>(d.TAB="tab",d.PANEL="panel",d.TOOL="tool",d.PREVIEW="preview",d.NOTES_ELEMENT="notes-element",d))(Ye||{});function ue(e,t,o){let i=Object.keys(e);return i.indexOf(t)>=0?t:i.length?i[0]:o}var Qt=({provider:e,store:t,fullAPI:o})=>{let i={getElements:l=>e.getElements(l),getPanels:()=>i.getElements("panel"),getStoryPanels:()=>{let l=i.getPanels(),{storyId:d}=t.getState(),c=o.getData(d);if(!l||!c||c.type!=="story")return l;let{parameters:n}=c,p={};return Object.entries(l).forEach(([s,r])=>{let{paramKey:a}=r;a&&n&&n[a]&&n[a].disable||(p[s]=r)}),p},getSelectedPanel:()=>{let{selectedPanel:l}=t.getState();return ue(i.getPanels(),l,l)},setSelectedPanel:l=>{t.setState({selectedPanel:l},{persistence:"session"})},setAddonState(l,d,c){let n,{addons:p}=t.getState();return typeof d=="function"?n=d(i.getAddonState(l)):n=d,t.setState({addons:{...p,[l]:n}},c).then(()=>i.getAddonState(l))},getAddonState:l=>t.getState().addons[l]};return{api:i,state:{selectedPanel:ue(i.getPanels(),t.getState().selectedPanel),addons:{}}}};var Se={};A(Se,{init:()=>Wt});var ee=require("@storybook/core-events"),Wt=({provider:e})=>{let t={getChannel:()=>e.channel,on:(o,i)=>(e.channel.addListener(o,i),()=>e.channel.removeListener(o,i)),off:(o,i)=>e.channel.removeListener(o,i),once:(o,i)=>e.channel.once(o,i),emit:(o,i,...l)=>{var d;((d=i==null?void 0:i.options)==null?void 0:d.target)&&i.options.target!=="storybook-preview-iframe"&&!i.options.target.startsWith("storybook-ref-")&&(i.options.target=i.options.target!=="storybook_internal"?`storybook-ref-${i.options.target}`:"storybook-preview-iframe"),e.channel.emit(o,i,...l)},collapseAll:()=>{e.channel.emit(ee.STORIES_COLLAPSE_ALL,{})},expandAll:()=>{t.emit(ee.STORIES_EXPAND_ALL)}};return{api:t,state:{}}};var fe={};A(fe,{init:()=>Yt});var Yt=({store:e})=>{let t={addNotification:i=>{t.clearNotification(i.id);let{notifications:l}=e.getState();e.setState({notifications:[...l,i]})},clearNotification:i=>{let{notifications:l}=e.getState();e.setState({notifications:l.filter(c=>c.id!==i)});let d=l.find(c=>c.id===i);d&&d.onClear&&d.onClear()}};return{api:t,state:{notifications:[]}}};var me={};A(me,{init:()=>zt});var zt=({store:e,navigate:t,fullAPI:o})=>{let i=()=>{let{path:d}=o.getUrlState();return!!(d||"").match(/^\/settings/)};return{state:{settings:{lastTrackedStoryId:null}},api:{closeSettings:()=>{let{settings:{lastTrackedStoryId:d}}=e.getState();d?o.selectStory(d):o.selectFirstStory()},changeSettingsTab:d=>{t(`/settings/${d}`)},isSettingsScreenActive:i,navigateToSettingsPage:async d=>{if(!i()){let{settings:c,storyId:n}=e.getState();await e.setState({settings:{...c,lastTrackedStoryId:n}})}t(d)}}}};var ge={};A(ge,{init:()=>Zt});var ze=P(require("global")),Je=P(require("memoizerific")),{RELEASE_NOTES_DATA:Jt}=ze.default,Xt=(0,Je.default)(1)(()=>{try{return{...JSON.parse(Jt)||{}}}catch{return{}}}),Zt=({store:e})=>{let t=Xt(),o=()=>{let{releaseNotesViewed:l}=e.getState();return l||[]};return{state:{releaseNotesViewed:[]},api:{releaseNotesVersion:()=>t.currentVersion,setDidViewReleaseNotes:()=>{let l=o();l.includes(t.currentVersion)||e.setState({releaseNotesViewed:[...l,t.currentVersion]},{persistence:"permanent"})},showReleaseNotesOnLaunch:()=>{if(!t.currentVersion)return!1;let d=o().includes(t.currentVersion);return t.showOnFirstLaunch&&!d}}}};var Te={};A(Te,{init:()=>uo});var dt=P(require("global")),F=require("@storybook/csf"),v=require("@storybook/core-events"),ut=P(require("util-deprecate")),yt=require("@storybook/client-logger");var lt=require("@storybook/client-logger");var we={};A(we,{defaultStoryMapper:()=>ct,getSourceType:()=>Re,init:()=>co});var Ee=P(require("global")),it=require("ts-dedent");var be=P(require("memoizerific")),Pe=P(require("util-deprecate")),te=require("ts-dedent"),Xe=P(require("lodash/mapValues")),Ze=P(require("lodash/countBy")),et=P(require("global")),oe=require("@storybook/csf");var{FEATURES:he}=et.default,eo=(0,Pe.default)(()=>{},te.dedent`
    The 'showRoots' config option is deprecated and will be removed in Storybook 7.0. Use 'sidebar.showRoots' instead.
    Read more about it in the migration guide: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md
  `),to=(0,Pe.default)(()=>{},te.dedent`
    The default hierarchy separators changed in Storybook 6.0.
    '|' and '.' will no longer create a hierarchy, but codemods are available.
    Read more about it in the migration guide: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md
  `),tt=({globalParameters:e,kindParameters:t,stories:o})=>(0,Xe.default)(o,i=>({...i,parameters:ve(e,t[i.kind],i.parameters)})),oo=/\s*\/\s*/,re=(e,{provider:t,docsOptions:o})=>_(ro(e,{docsOptions:o}),{provider:t,docsOptions:o}),ro=(e,{docsOptions:t})=>{let o=new Set,i=Object.entries(e).reduce((l,[d,c])=>{if(!c)return l;let{docsOnly:n,fileName:p,...s}=c.parameters,r={title:c.kind,id:d,name:c.name,importPath:p};if(n)l[d]={type:"docs",storiesImports:[],...r};else{if(!o.has(r.title)&&t.docsPage){let f=t.defaultName,y=(0,oe.toId)(c.componentId||r.title,f);o.add(r.title),l[y]={type:"docs",storiesImports:[],...r,id:y,name:f}}let{argTypes:a,args:u,initialArgs:S}=c;l[d]={type:"story",...r,parameters:s,argTypes:a,args:u,initialArgs:S}}return l},{});return{v:4,entries:i}},no=e=>{let t=(0,Ze.default)(Object.values(e.stories),"title");return{v:4,entries:Object.values(e.stories).reduce((o,i)=>{var d;let l="story";return(((d=i.parameters)==null?void 0:d.docsOnly)||i.name==="Page"&&t[i.title]===1)&&(l="docs"),o[i.id]={type:l,...l==="docs"&&{storiesImports:[]},...i},o},{})}},_=(e,{provider:t,docsOptions:o})=>{if(!e.v)throw new Error("Composition: Missing stories.json version");let i=e.v===4?e:no(e),l=Object.values(i.entries),{sidebar:d={},showRoots:c}=t.getConfig(),{showRoots:n=c,collapsedRoots:p=[],renderLabel:s}=d,r=l.some(({title:y})=>y.match(/\.|\|/));typeof c<"u"&&eo();let a=typeof n<"u";r&&!a&&(he==null?void 0:he.warnOnLegacyHierarchySeparator)&&to();let u=Object.values(l).reduce((y,m)=>{if(o.docsMode&&m.type!=="docs")return y;let{title:g}=m,b=g.trim().split(oo),E=(!a||n)&&b.length>1?[b.shift()]:[],w=[...E,...b],R=w.reduce((x,I,L)=>{let ce=L>0&&x[L-1],le=(0,oe.sanitize)(ce?`${ce}-${I}`:I);if(ce===le)throw new Error(te.dedent`
          Invalid part '${I}', leading to id === parentId ('${le}'), inside title '${g}'
          
          Did you create a path that uses the separator char accidentally, such as 'Vue <docs/>' where '/' is a separator char? See https://github.com/storybookjs/storybook/issues/6128
          `);return x.push(le),x},[]);return R.forEach((x,I)=>{let L=R[I+1]||m.id;E.length&&I===0?y[x]=C(y[x]||{},{type:"root",id:x,name:w[I],depth:I,renderLabel:s,startCollapsed:p.includes(x),children:[L],isRoot:!0,isComponent:!1,isLeaf:!1}):(!y[x]||y[x].type==="component")&&I===R.length-1?y[x]=C(y[x]||{},{type:"component",id:x,name:w[I],parent:R[I-1],depth:I,renderLabel:s,...L&&{children:[L]},isRoot:!1,isComponent:!0,isLeaf:!1}):y[x]=C(y[x]||{},{type:"group",id:x,name:w[I],parent:R[I-1],depth:I,renderLabel:s,...L&&{children:[L]},isRoot:!1,isComponent:!1,isLeaf:!1})}),y[m.id]={type:"story",...m,depth:R.length,parent:R[R.length-1],renderLabel:s,...m.type!=="docs"&&{prepared:!!m.parameters},kind:m.title,isRoot:!1,isComponent:!1,isLeaf:!0},y},{});function S(y,m){return y[m.id]||(y[m.id]=m,(m.type==="root"||m.type==="group"||m.type==="component")&&m.children.forEach(g=>S(y,u[g]))),y}let f=Object.values(u).filter(y=>y.type!=="root"&&!y.parent).reduce(S,{});return Object.values(u).filter(y=>y.type==="root").reduce(S,f)},ot=(e,t)=>t?Object.fromEntries(Object.entries(e).map(([o,i])=>{let l=t[o];return i.type==="story"&&(l==null?void 0:l.type)==="story"&&l.prepared?[o,{...l,...i,prepared:!0}]:[o,i]})):e,rt=(0,be.default)(1)(e=>Object.entries(e).reduce((t,o)=>{let i=o[1];return i.type==="component"&&t.push([...i.children]),t},[])),nt=(0,be.default)(1)(e=>Object.keys(e).filter(t=>["story","docs"].includes(e[t].type)));var{location:so,fetch:st}=Ee.default,at=/(\/((?:[^\/]+?)\.[^\/]+?)|\/)$/,Re=(e,t)=>{let{origin:o,pathname:i}=so,{origin:l,pathname:d}=new URL(e),c=`${o+i}`.replace(at,""),n=`${l+d}`.replace(at,"");return c===n?["local",n]:t||e?["external",n]:[null,null]},ct=(e,t)=>({...t,kind:t.kind.replace("|","/")}),ao=(e,t)=>Object.entries(e).reduce((o,[i,l])=>({...o,[i]:{...l,refId:t.id}}),{});async function xe(e){if(!e)return{};try{let t=await e;if(!t.ok)return{};let o=await t.json();return o.entries||o.stories?{storyIndex:o}:o}catch(t){return{error:t}}}var io=(e,t,o)=>{let{storyMapper:i}=o;return i?Object.entries(e).reduce((l,[d,c])=>({...l,[d]:i(t,c)}),{}):e},co=({store:e,provider:t,singleStory:o,docsOptions:i={}},{runCheck:l=!0}={})=>{let d={findRef:p=>{let s=d.getRefs();return Object.values(s).find(({url:r})=>r.match(p))},changeRefVersion:(p,s)=>{let{versions:r,title:a}=d.getRefs()[p],u={id:p,url:s,versions:r,title:a,stories:{}};d.checkRef(u)},changeRefState:(p,s)=>{let{[p]:r,...a}=d.getRefs();a[p]={...r,ready:s},e.setState({refs:a})},checkRef:async p=>{let{id:s,url:r,version:a,type:u}=p,S=u==="server-checked",f={},y=a?`?version=${a}`:"",m=S?"omit":"include",[g,b]=await Promise.all(["index.json","stories.json"].map(async w=>st(`${r}/${w}${y}`,{headers:{Accept:"application/json"},credentials:m})));if(g.ok||b.ok){let[w,R]=await Promise.all([g.ok?xe(g):xe(b),xe(st(`${r}/metadata.json${y}`,{headers:{Accept:"application/json"},credentials:m,cache:"no-cache"}).catch(()=>!1))]);Object.assign(f,{...w,...R})}else S||(f.error={message:it.dedent`
            Error: Loading of ref failed
              at fetch (lib/api/src/modules/refs.ts)

            URL: ${r}

            We weren't able to load the above URL,
            it's possible a CORS error happened.

            Please check your dev-tools network tab.
          `});let E=p.versions&&Object.keys(p.versions).length?p.versions:f.versions;await d.setRef(s,{id:s,url:r,...f,...E?{versions:E}:{},type:f.storyIndex?"lazy":"auto-inject"})},getRefs:()=>{let{refs:p={}}=e.getState();return p},setRef:(p,{storyIndex:s,setStoriesData:r,...a},u=!1)=>{if(o)return;let{storyMapper:S=ct}=t.getConfig(),f=d.getRefs()[p],y;r?y=re(io(r,f,{storyMapper:S}),{provider:t,docsOptions:i}):s&&(y=_(s,{provider:t,docsOptions:i})),y&&(y=ao(y,f)),d.updateRef(p,{stories:y,...a,ready:u})},updateRef:(p,s)=>{let{[p]:r,...a}=d.getRefs();a[p]={...r,...s};let u=Object.keys(n).reduce((S,f)=>(S[f]=a[f],S),{});e.setState({refs:u})}},c=!o&&Ee.default.REFS||{},n=c;return l&&Object.entries(c).forEach(([p,s])=>{d.checkRef({...s,stories:{}})}),{api:d,state:{refs:n}}};var k=(e,t)=>{let{source:o,refId:i,type:l}=e,[d,c]=Re(o,i),n=i&&t.getRefs()[i]?t.getRefs()[i]:t.findRef(c),p={source:o,sourceType:d,sourceLocation:c,refId:i,ref:n,type:l};switch(!0){case typeof i=="string":case d==="local":case d==="external":return p;default:return lt.logger.warn(`Received a ${l} frame that was not configured as a ref`),null}};var{FEATURES:Ie,fetch:lo}=dt.default,po="./index.json",pt=["enableShortcuts","theme","showRoots"].reduce((e,t)=>(e[t]=(0,ut.default)(()=>{},`parameters.options.${t} is deprecated and will be removed in Storybook 7.0.
To change this setting, use \`addons.setConfig\`. See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-immutable-options-parameters
  `),e),{});function Ae(e){!e||Object.keys(e).forEach(t=>{pt[t]&&pt[t]()})}var uo=({fullAPI:e,store:t,navigate:o,provider:i,storyId:l,viewMode:d,docsOptions:c={}})=>{let n={storyId:F.toId,getData:(s,r)=>{let a=n.resolveStory(s,r);if((a==null?void 0:a.type)==="story"||(a==null?void 0:a.type)==="docs")return a},isPrepared:(s,r)=>{let a=n.getData(s,r);return a.type==="story"?a.prepared:!0},resolveStory:(s,r)=>{let{refs:a,storiesHash:u}=t.getState();return r?a[r].stories?a[r].stories[s]:void 0:u?u[s]:void 0},getCurrentStoryData:()=>{let{storyId:s,refId:r}=t.getState();return n.getData(s,r)},getParameters:(s,r)=>{let{storyId:a,refId:u}=typeof s=="string"?{storyId:s,refId:void 0}:s,S=n.getData(a,u);if((S==null?void 0:S.type)==="story"){let{parameters:f}=S;if(f)return r?f[r]:f}return null},getCurrentParameter:s=>{let{storyId:r,refId:a}=t.getState();return n.getParameters({storyId:r,refId:a},s)||void 0},jumpToComponent:s=>{let{storiesHash:r,storyId:a,refs:u,refId:S}=t.getState();if(!n.getData(a,S))return;let y=S?u[S].stories||{}:r,m=n.findSiblingStoryId(a,y,s,!0);m&&n.selectStory(m,void 0,{ref:S})},jumpToStory:s=>{let{storiesHash:r,storyId:a,refs:u,refId:S}=t.getState(),f=n.getData(a,S);if(!f)return;let y=f.refId?u[f.refId].stories:r,m=n.findSiblingStoryId(a,y,s,!1);m&&n.selectStory(m,void 0,{ref:S})},setStories:async(s,r)=>{let a=re(s,{provider:i,docsOptions:c});await t.setState({storiesHash:a,storiesConfigured:!0,storiesFailed:r})},selectFirstStory:()=>{let{storiesHash:s}=t.getState(),r=Object.keys(s).find(a=>s[a].type==="story");if(r){n.selectStory(r);return}o("/")},selectStory:(s=void 0,r=void 0,a={})=>{let{ref:u}=a,{storyId:S,storiesHash:f,refs:y}=t.getState(),m=u?y[u].stories:f,g=S==null?void 0:S.split("--",2)[0];if(r)if(s){let b=u?`${u}_${(0,F.toId)(s,r)}`:(0,F.toId)(s,r);if(m[b])n.selectStory(b,void 0,a);else{let E=m[(0,F.sanitize)(s)];if((E==null?void 0:E.type)==="component"){let w=E.children.find(R=>m[R].name===r);w&&n.selectStory(w,void 0,a)}}}else{let b=(0,F.toId)(g,r);n.selectStory(b,void 0,a)}else{let b=s?m[s]||m[(0,F.sanitize)(s)]:m[g];if(!b)throw new Error(`Unknown id or title: '${s}'`);let E=n.findLeafEntry(m,b.id),w=E.refId?`${E.refId}_${E.id}`:E.id;o(`/${E.type}/${w}`)}},findLeafEntry(s,r){let a=s[r];if(a.type==="docs"||a.type==="story")return a;let u=a.children[0];return n.findLeafEntry(s,u)},findLeafStoryId(s,r){var a;return(a=n.findLeafEntry(s,r))==null?void 0:a.id},findSiblingStoryId(s,r,a,u){if(u){let y=rt(r),m=y.findIndex(g=>g.includes(s));return m===y.length-1&&a>0||m===0&&a<0?void 0:y[m+a]?y[m+a][0]:void 0}let S=nt(r),f=S.indexOf(s);if(!(f===S.length-1&&a>0)&&!(f===0&&a<0))return S[f+a]},updateStoryArgs:(s,r)=>{let{id:a,refId:u}=s;e.emit(v.UPDATE_STORY_ARGS,{storyId:a,updatedArgs:r,options:{target:u}})},resetStoryArgs:(s,r)=>{let{id:a,refId:u}=s;e.emit(v.RESET_STORY_ARGS,{storyId:a,argNames:r,options:{target:u}})},fetchStoryList:async()=>{try{let s=await lo(po);if(s.status!==200)throw new Error(await s.text());let r=await s.json();if(r.v<3){yt.logger.warn(`Skipping story index with version v${r.v}, awaiting SET_STORIES.`);return}await e.setStoryList(r)}catch(s){t.setState({storiesConfigured:!0,storiesFailed:s})}},setStoryList:async s=>{let r=_(s,{provider:i,docsOptions:c}),a=t.getState().storiesHash;await t.setState({storiesHash:ot(r,a),storiesConfigured:!0,storiesFailed:null})},updateStory:async(s,r,a)=>{if(a){let{id:u,stories:S}=a;S[s]={...S[s],...r},await e.updateRef(u,{stories:S})}else{let{storiesHash:u}=t.getState();u[s]={...u[s],...r},await t.setState({storiesHash:u})}}};return{api:n,state:{storiesHash:{},storyId:l,viewMode:d,storiesConfigured:!1,hasCalledSetOptions:!1},init:async()=>{var s;e.on(v.STORY_SPECIFIED,function({storyId:a,viewMode:u}){let{sourceType:S}=k(this,e);if(!e.isSettingsScreenActive()&&S==="local"){let f=t.getState();(f.storyId!==a||f.viewMode!==u)&&o(`/${u}/${a}`)}}),e.on(v.STORY_CHANGED,function(){let{sourceType:a}=k(this,e);if(a==="local"){let u=e.getCurrentParameter("options");u&&(Ae(u),e.setOptions(u))}}),e.on(v.STORY_PREPARED,function({id:a,...u}){let{ref:S,sourceType:f}=k(this,e);if(e.updateStory(a,{...u,prepared:!0},S),S)e.updateRef(S.id,{ready:!0});else if(!t.getState().hasCalledSetOptions){let{options:y}=u.parameters;Ae(y),e.setOptions(y),t.setState({hasCalledSetOptions:!0})}if(f==="local"){let{storyId:y,storiesHash:m,refId:g}=t.getState(),b=Array.from(new Set([n.findSiblingStoryId(y,m,1,!0),n.findSiblingStoryId(y,m,-1,!0)])).filter(Boolean);e.emit(v.PRELOAD_ENTRIES,{ids:b,options:{target:g}})}}),e.on(v.SET_STORIES,function(a){let{ref:u}=k(this,e),S=a.v?tt(a):a.stories;if(u)e.setRef(u.id,{...u,setStoriesData:S},!0);else{if(!a.v)throw new Error("Unexpected legacy SET_STORIES event from local source");e.setStories(S);let f=e.getCurrentParameter("options");Ae(f),e.setOptions(f)}}),e.on(v.SELECT_STORY,function({kind:a,story:u,storyId:S,...f}){let{ref:y}=k(this,e);y?e.selectStory(S||a,u,{...f,ref:y.id}):e.selectStory(S||a,u,f)}),e.on(v.STORY_ARGS_UPDATED,function({storyId:a,args:u}){let{ref:S}=k(this,e);e.updateStory(a,{args:u},S)}),e.on(v.CONFIG_ERROR,function(a){t.setState({storiesConfigured:!0,storiesFailed:a})}),Ie!=null&&Ie.storyStoreV7&&((s=i.serverChannel)==null||s.on(v.STORY_INDEX_INVALIDATED,()=>e.fetchStoryList()),await e.fetchStoryList())}}};var ne={};A(ne,{ActiveTabs:()=>bt,focusableUIElements:()=>B,init:()=>So});var St=P(require("global")),G=P(require("lodash/pick")),$=require("dequal"),ft=require("@storybook/theming/create"),mt=require("@storybook/core-events"),gt=require("@storybook/client-logger"),ht=require("ts-dedent");var{document:yo}=St.default,bt={SIDEBAR:"sidebar",CANVAS:"canvas",ADDONS:"addons"},j={ui:{enableShortcuts:!0},layout:{initialActive:bt.CANVAS,showToolbar:!0,isFullscreen:!1,showPanel:!0,showNav:!0,panelPosition:"bottom",showTabs:!0},selectedPanel:void 0,theme:(0,ft.create)()},B={storySearchField:"storybook-explorer-searchfield",storyListMenu:"storybook-explorer-menu",storyPanelRoot:"storybook-panel-root"},So=({store:e,provider:t,singleStory:o,fullAPI:i})=>{let l={toggleFullscreen(c){return e.setState(n=>{let{showNav:p}=n.layout,s=typeof c=="boolean"?c:!n.layout.isFullscreen,r=p===!1&&s===!1;return{layout:{...n.layout,isFullscreen:s,showNav:!o&&r?!0:p}}},{persistence:"session"})},togglePanel(c){return e.setState(n=>{let{showNav:p,isFullscreen:s}=n.layout,r=typeof c<"u"?c:!n.layout.showPanel,a=p===!1&&r===!1;return{layout:{...n.layout,showPanel:r,isFullscreen:a?!0:s}}},{persistence:"session"})},togglePanelPosition(c){return typeof c<"u"?e.setState(n=>({layout:{...n.layout,panelPosition:c}}),{persistence:"permanent"}):e.setState(n=>({layout:{...n.layout,panelPosition:n.layout.panelPosition==="right"?"bottom":"right"}}),{persistence:"permanent"})},toggleNav(c){return e.setState(n=>{if(o)return{layout:n.layout};let{showPanel:p,isFullscreen:s}=n.layout,r=typeof c<"u"?c:!n.layout.showNav,a=p===!1&&r===!1;return{layout:{...n.layout,showNav:r,isFullscreen:a?!0:!r&&s}}},{persistence:"session"})},toggleToolbar(c){return e.setState(n=>{let p=typeof c<"u"?c:!n.layout.showToolbar;return{layout:{...n.layout,showToolbar:p}}},{persistence:"session"})},resetLayout(){return e.setState(c=>({layout:{...c.layout,showNav:!1,showPanel:!1,isFullscreen:!1}}),{persistence:"session"})},focusOnUIElement(c,n){if(!c)return;let p=yo.getElementById(c);p&&(p.focus(),n&&p.select())},getInitialOptions(){var s;let{theme:c,selectedPanel:n,...p}=t.getConfig();return((s=p.layout)==null?void 0:s.isToolshown)!==void 0&&(gt.once.warn(ht.dedent`
          The "isToolshown" option is deprecated. Please use "showToolbar" instead.

          See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#renamed-istoolshown-to-showtoolbar
        `),p.layout.showToolbar=p.layout.isToolshown),{...j,layout:{...j.layout,...(0,G.default)(p,Object.keys(j.layout)),...o&&{showNav:!1}},ui:{...j.ui,...(0,G.default)(p,Object.keys(j.ui))},selectedPanel:n||j.selectedPanel,theme:c||j.theme}},setOptions:c=>{let{layout:n,ui:p,selectedPanel:s,theme:r}=e.getState();if(c){let a={...n,...(0,G.default)(c,Object.keys(n)),...o&&{showNav:!1}},u={...p,...(0,G.default)(c,Object.keys(p))},S={...r,...c.theme},f={};(0,$.dequal)(p,u)||(f.ui=u),(0,$.dequal)(n,a)||(f.layout=a),c.selectedPanel&&!(0,$.dequal)(s,c.selectedPanel)&&(f.selectedPanel=c.selectedPanel),Object.keys(f).length&&e.setState(f,{persistence:"permanent"}),(0,$.dequal)(r,S)||e.setState({theme:S})}}},d=(0,G.default)(e.getState(),"layout","ui","selectedPanel");return{api:l,state:C(l.getInitialOptions(),d),init:()=>{l.setOptions(C(l.getInitialOptions(),d)),i.on(mt.SET_CONFIG,()=>{l.setOptions(C(l.getInitialOptions(),d))})}}};var Me={};A(Me,{controlOrMetaKey:()=>se,defaultShortcuts:()=>H,init:()=>mo,isMacLike:()=>It,keys:()=>ke});var Rt=P(require("global")),wt=require("@storybook/core-events");var Pt=P(require("global")),{navigator:ar}=Pt.default;var vt=e=>{if(["Meta","Alt","Control","Shift"].includes(e.key))return null;let t=[];return e.altKey&&t.push("alt"),e.ctrlKey&&t.push("control"),e.metaKey&&t.push("meta"),e.shiftKey&&t.push("shift"),e.key&&e.key.length===1&&e.key!==" "&&t.push(e.key.toUpperCase()),e.key===" "&&t.push("space"),e.key==="Escape"&&t.push("escape"),e.key==="ArrowRight"&&t.push("ArrowRight"),e.key==="ArrowDown"&&t.push("ArrowDown"),e.key==="ArrowUp"&&t.push("ArrowUp"),e.key==="ArrowLeft"&&t.push("ArrowLeft"),t.length>0?t:null},xt=(e,t)=>!e||!t||(e.join("")==="shift/"&&e.shift(),e.length!==t.length)?!1:!e.find((o,i)=>o!==t[i]);var{navigator:Ce,document:Et}=Rt.default,It=()=>Ce&&Ce.platform?!!Ce.platform.match(/(Mac|iPhone|iPod|iPad)/i):!1,se=()=>It()?"meta":"control";function ke(e){return Object.keys(e)}var H=Object.freeze({fullScreen:["F"],togglePanel:["A"],panelPosition:["D"],toggleNav:["S"],toolbar:["T"],search:["/"],focusNav:["1"],focusIframe:["2"],focusPanel:["3"],prevComponent:["alt","ArrowUp"],nextComponent:["alt","ArrowDown"],prevStory:["alt","ArrowLeft"],nextStory:["alt","ArrowRight"],shortcutsPage:[se(),"shift",","],aboutPage:[","],escape:["escape"],collapseAll:[se(),"shift","ArrowUp"],expandAll:[se(),"shift","ArrowDown"]}),Oe={};function fo(e){return/input|textarea/i.test(e.target.tagName)||e.target.getAttribute("contenteditable")!==null}var mo=({store:e,fullAPI:t})=>{let o={getShortcutKeys(){return e.getState().shortcuts},getDefaultShortcuts(){return{...H,...o.getAddonsShortcutDefaults()}},getAddonsShortcuts(){return Oe},getAddonsShortcutLabels(){let c={};return Object.entries(o.getAddonsShortcuts()).forEach(([n,{label:p}])=>{c[n]=p}),c},getAddonsShortcutDefaults(){let c={};return Object.entries(o.getAddonsShortcuts()).forEach(([n,{defaultShortcut:p}])=>{c[n]=p}),c},async setShortcuts(c){return await e.setState({shortcuts:c},{persistence:"permanent"}),c},async restoreAllDefaultShortcuts(){return o.setShortcuts(o.getDefaultShortcuts())},async setShortcut(c,n){let p=o.getShortcutKeys();return await o.setShortcuts({...p,[c]:n}),n},async setAddonShortcut(c,n){let p=o.getShortcutKeys();return await o.setShortcuts({...p,[`${c}-${n.actionName}`]:n.defaultShortcut}),Oe[`${c}-${n.actionName}`]=n,n},async restoreDefaultShortcut(c){let n=o.getDefaultShortcuts()[c];return o.setShortcut(c,n)},handleKeydownEvent(c){let n=vt(c),p=o.getShortcutKeys(),r=ke(p).find(a=>xt(n,p[a]));r&&(c!=null&&c.preventDefault&&c.preventDefault(),o.handleShortcutFeature(r))},handleShortcutFeature(c){let{layout:{isFullscreen:n,showNav:p,showPanel:s},ui:{enableShortcuts:r}}=e.getState();if(!!r)switch(c){case"escape":{n?t.toggleFullscreen():p||t.toggleNav();break}case"focusNav":{n&&t.toggleFullscreen(),p||t.toggleNav(),t.focusOnUIElement(B.storyListMenu);break}case"search":{n&&t.toggleFullscreen(),p||t.toggleNav(),setTimeout(()=>{t.focusOnUIElement(B.storySearchField,!0)},0);break}case"focusIframe":{let a=Et.getElementById("storybook-preview-iframe");if(a)try{a.contentWindow.focus()}catch{}break}case"focusPanel":{n&&t.toggleFullscreen(),s||t.togglePanel(),t.focusOnUIElement(B.storyPanelRoot);break}case"nextStory":{t.jumpToStory(1);break}case"prevStory":{t.jumpToStory(-1);break}case"nextComponent":{t.jumpToComponent(1);break}case"prevComponent":{t.jumpToComponent(-1);break}case"fullScreen":{t.toggleFullscreen();break}case"togglePanel":{n&&(t.toggleFullscreen(),t.resetLayout()),t.togglePanel();break}case"toggleNav":{n&&(t.toggleFullscreen(),t.resetLayout()),t.toggleNav();break}case"toolbar":{t.toggleToolbar();break}case"panelPosition":{n&&t.toggleFullscreen(),s||t.togglePanel(),t.togglePanelPosition();break}case"aboutPage":{t.navigate("/settings/about");break}case"shortcutsPage":{t.navigate("/settings/shortcuts");break}case"collapseAll":{t.collapseAll();break}case"expandAll":{t.expandAll();break}default:Oe[c].action();break}}},{shortcuts:i=H}=e.getState(),l={shortcuts:ke(H).reduce((c,n)=>({...c,[n]:i[n]||H[n]}),H)};return{api:o,state:l,init:()=>{Et.addEventListener("keydown",c=>{fo(c)||t.handleKeydownEvent(c)}),t.on(wt.PREVIEW_KEYDOWN,c=>{t.handleKeydownEvent(c.event)})}}};var Fe={};A(Fe,{init:()=>ho});var Q=require("@storybook/client-logger"),M=require("@storybook/core-events"),Y=require("@storybook/router"),ae=require("@storybook/csf"),Le=require("dequal"),At=P(require("global")),W=require("ts-dedent"),{window:De}=At.default,q=e=>{if(e==="true"||e==="1")return!0;if(e==="false"||e==="0")return!1},Ne,go=({state:{location:e,path:t,viewMode:o,storyId:i},singleStory:l})=>{let{full:d,panel:c,nav:n,shortcuts:p,addonPanel:s,tabs:r,addons:a,panelRight:u,stories:S,selectedKind:f,selectedStory:y,path:m,...g}=(0,Y.queryFromLocation)(e),b={isFullscreen:q(d),showNav:!l&&q(n),showPanel:q(c),panelPosition:["right","bottom"].includes(c)?c:void 0,showTabs:q(r)},E={enableShortcuts:q(p)},w=s||void 0;a==="0"&&(Q.once.warn(W.dedent`
      The 'addons' query param is deprecated and will be removed in Storybook 7.0. Use 'panel=false' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),b.showPanel=!1),u==="1"&&(Q.once.warn(W.dedent`
      The 'panelRight' query param is deprecated and will be removed in Storybook 7.0. Use 'panel=right' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),b.panelPosition="right"),S==="0"&&(Q.once.warn(W.dedent`
      The 'stories' query param is deprecated and will be removed in Storybook 7.0. Use 'nav=false' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),b.showNav=!1);let R=i;!R&&f&&(Q.once.warn(W.dedent`
      The 'selectedKind' and 'selectedStory' query params are deprecated and will be removed in Storybook 7.0. Use 'path' instead.

      More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-layout-url-params
    `),R=y?(0,ae.toId)(f,y):(0,ae.sanitize)(f));let x=(0,Le.dequal)(Ne,g)?Ne:g;return Ne=x,{viewMode:o,layout:b,ui:E,selectedPanel:w,location:e,path:t,customQueryParams:x,storyId:R}},ho=({store:e,navigate:t,state:o,provider:i,fullAPI:l,...d})=>{let c=(s,r={},a={})=>{let u=Object.entries(r).filter(([,f])=>f).sort(([f],[y])=>f<y?-1:1).map(([f,y])=>`${f}=${y}`),S=[s,...u].join("&");return t(S,a)},n={getQueryParam(s){let{customQueryParams:r}=e.getState();return r?r[s]:void 0},getUrlState(){let{path:s,customQueryParams:r,storyId:a,url:u,viewMode:S}=e.getState();return{path:s,queryParams:r,storyId:a,url:u,viewMode:S}},setQueryParams(s){let{customQueryParams:r}=e.getState(),a={},u={...r,...Object.entries(s).reduce((S,[f,y])=>(y!==null&&(S[f]=y),S),a)};(0,Le.dequal)(r,u)||(e.setState({customQueryParams:u}),l.emit(M.UPDATE_QUERY_PARAMS,u))},navigateUrl(s,r){t(s,{...r,plain:!0})}},p=()=>{let s=()=>{let{path:a,queryParams:u,viewMode:S}=l.getUrlState();if(S!=="story")return;let f=l.getCurrentStoryData();if((f==null?void 0:f.type)!=="story")return;let{args:y,initialArgs:m}=f,g=(0,Y.buildArgsParam)(m,y);c(a,{...u,args:g},{replace:!0}),n.setQueryParams({args:g})};l.on(M.SET_CURRENT_STORY,()=>s());let r;l.on(M.STORY_ARGS_UPDATED,()=>{"requestIdleCallback"in De?(r&&De.cancelIdleCallback(r),r=De.requestIdleCallback(s,{timeout:1e3})):(r&&clearTimeout(r),setTimeout(s,100))}),l.on(M.GLOBALS_UPDATED,({globals:a,initialGlobals:u})=>{let{path:S,queryParams:f}=l.getUrlState(),y=(0,Y.buildArgsParam)(u,a);c(S,{...f,globals:y},{replace:!0}),n.setQueryParams({globals:y})}),l.on(M.NAVIGATE_URL,(a,u)=>{l.navigateUrl(a,u)}),l.showReleaseNotesOnLaunch()&&t("/settings/release-notes")};return{api:n,state:go({store:e,navigate:t,state:o,provider:i,fullAPI:l,...d}),init:p}};var je={};A(je,{init:()=>Po});var Ot=P(require("global")),O=P(require("semver")),kt=P(require("memoizerific"));var Tt="7.0.0-alpha.35";var{VERSIONCHECK:bo}=Ot.default,Ct=(0,kt.default)(1)(()=>{try{return{...JSON.parse(bo).data||{}}}catch{return{}}}),Po=({store:e,mode:t,fullAPI:o})=>{let{dismissedVersionNotification:i}=e.getState(),l={versions:{current:{version:Tt},...Ct()},dismissedVersionNotification:i},d={getCurrentVersion:()=>{let{versions:{current:n}}=e.getState();return n},getLatestVersion:()=>{let{versions:{latest:n,next:p,current:s}}=e.getState();return s&&O.default.prerelease(s.version)&&p?n&&O.default.gt(n.version,p.version)?n:p:n},versionUpdateAvailable:()=>{let n=d.getLatestVersion(),p=d.getCurrentVersion();if(n){if(!n.version||!p.version)return!0;let r=!!O.default.prerelease(p.version)?`${O.default.major(p.version)}.${O.default.minor(p.version)}.${O.default.patch(p.version)}`:p.version,a=O.default.diff(r,n.version);return O.default.gt(n.version,r)&&a!=="patch"&&!a.includes("pre")}return!1}};return{init:async()=>{let{versions:n={}}=e.getState(),{latest:p,next:s}=Ct();if(await e.setState({versions:{...n,latest:p,next:s}}),d.versionUpdateAvailable()){let r=d.getLatestVersion().version,a=O.default.diff(n.current.version,n.latest.version);r!==i&&a!=="patch"&&!O.default.prerelease(r)&&t!=="production"&&o.addNotification({id:"update",link:"/settings/about",content:{headline:`Storybook ${r} is available!`,subHeadline:`Your current version is: ${n.current.version}`},icon:{name:"book"},onClear(){e.setState({dismissedVersionNotification:r},{persistence:"permanent"})}})}},state:l,api:d}};var He={};A(He,{init:()=>vo});var U=require("@storybook/core-events"),Ve=require("@storybook/client-logger"),Ge=require("dequal");var vo=({store:e,fullAPI:t})=>{let o={getGlobals(){return e.getState().globals},getGlobalTypes(){return e.getState().globalTypes},updateGlobals(c){t.emit(U.UPDATE_GLOBALS,{globals:c,options:{target:"storybook-preview-iframe"}})}},i={globals:{},globalTypes:{}},l=c=>{var p;let n=(p=e.getState())==null?void 0:p.globals;(0,Ge.dequal)(c,n)||e.setState({globals:c})};return{api:o,state:i,init:()=>{t.on(U.GLOBALS_UPDATED,function({globals:n}){let{ref:p}=k(this,t);p?Ve.logger.warn("received a GLOBALS_UPDATED from a non-local ref. This is not currently supported."):l(n)}),t.on(U.SET_GLOBALS,function({globals:n,globalTypes:p}){var a;let{ref:s}=k(this,t),r=(a=e.getState())==null?void 0:a.globals;s?Object.keys(n).length>0&&Ve.logger.warn("received globals from a non-local ref. This is not currently supported."):e.setState({globals:n,globalTypes:p}),r&&Object.keys(r).length!==0&&!(0,Ge.dequal)(n,r)&&o.updateGlobals(r)})}}};var{ActiveTabs:xo}=ne;var z=_e({api:void 0,state:Z({})}),ve=(...e)=>(0,Mt.default)({},...e,(t,o)=>{if(Array.isArray(o))return o}),ie=class extends h.Component{constructor(o){super(o);this.api={};this.initModules=()=>{this.modules.forEach(o=>{"init"in o&&o.init()})};let{location:i,path:l,refId:d,viewMode:c=o.docsOptions.docsMode?"docs":"story",singleStory:n,storyId:p,docsOptions:s,navigate:r}=o,a=new K({getState:()=>this.state,setState:(g,b)=>this.setState(g,b)}),u={location:i,path:l,viewMode:c,singleStory:n,storyId:p,refId:d},S={docsOptions:s};this.state=a.getInitialState(Z({...u,...S}));let f={navigate:r,store:a,provider:o.provider};this.modules=[de,Se,ye,ne,fe,me,ge,Me,Te,we,He,Fe,je].map(g=>g.init({...u,...S,...f,state:this.state,fullAPI:this.api}));let y=Z(this.state,...this.modules.map(g=>g.state)),m=Object.assign(this.api,{navigate:r},...this.modules.map(g=>g.api));this.state=y,this.api=m}static getDerivedStateFromProps(o,i){return i.path!==o.path?{...i,location:o.location,path:o.path,refId:o.refId,viewMode:o.viewMode,storyId:o.storyId}:null}shouldComponentUpdate(o,i){let l=this.state,d=this.props;return l!==i||d.path!==o.path}render(){let{children:o}=this.props,i={state:this.state,api:this.api};return h.default.createElement(Eo,{effect:this.initModules},h.default.createElement(z.Provider,{value:i},h.default.createElement(Dt,null,o)))}};ie.displayName="Manager";var Eo=({children:e,effect:t})=>(h.default.useEffect(t,[]),e),Ro=e=>e;function Dt({filter:e=Ro,children:t}){let o=(0,h.useContext)(z),i=(0,h.useRef)(t),l=(0,h.useRef)(e);if(typeof i.current!="function")return h.default.createElement(h.Fragment,null,i.current);let d=l.current(o),c=(0,h.useMemo)(()=>[...Object.entries(d).reduce((n,p)=>n.concat(p),[])],[o.state]);return(0,h.useMemo)(()=>{let n=i.current;return h.default.createElement(n,{...d})},c)}function wo(){let{state:e}=(0,h.useContext)(z);return e}function N(){let{api:e}=(0,h.useContext)(z);return e}function Nt(e,t){return typeof e>"u"?t:e}var Lt=(e,t=[])=>{let o=N();return(0,h.useEffect)(()=>(Object.entries(e).forEach(([i,l])=>o.on(i,l)),()=>{Object.entries(e).forEach(([i,l])=>o.off(i,l))}),t),o.emit};function Io(e){return N().isPrepared(e)}function Ao(e,t){let i=N().getCurrentParameter(e);return Nt(i,t)}var D={};function Ft(e,t){let o=N(),i=o.getAddonState(e),l=Nt(i,D[e]?D[e]:t),d=(p,s)=>{D[e]&&(D[e]=p),o.setAddonState(e,p,s)},c=(0,h.useMemo)(()=>{let p={[`${T.SHARED_STATE_CHANGED}-client-${e}`]:r=>d(r),[`${T.SHARED_STATE_SET}-client-${e}`]:r=>d(r)},s={[T.SET_STORIES]:()=>{let r=o.getAddonState(e);r?(D[e]=r,o.emit(`${T.SHARED_STATE_SET}-manager-${e}`,r)):D[e]?(d(D[e]),o.emit(`${T.SHARED_STATE_SET}-manager-${e}`,D[e])):t!==void 0&&(d(t),D[e]=t,o.emit(`${T.SHARED_STATE_SET}-manager-${e}`,t))},[T.STORY_CHANGED]:()=>{let r=o.getAddonState(e);r!==void 0&&o.emit(`${T.SHARED_STATE_SET}-manager-${e}`,r)}};return{...p,...s}},[e]),n=Lt(c);return[l,(p,s)=>{d(p,s),n(`${T.SHARED_STATE_CHANGED}-manager-${e}`,p)}]}function To(e,t){return Ft(e,t)}function Co(){let{getCurrentStoryData:e,updateStoryArgs:t,resetStoryArgs:o}=N(),i=e(),l=i.type==="story"?i.args:{},d=(0,h.useCallback)(n=>t(i,n),[i,t]),c=(0,h.useCallback)(n=>o(i,n),[i,o]);return[l,d,c]}function Oo(){let e=N();return[e.getGlobals(),e.updateGlobals]}function ko(){return N().getGlobalTypes()}function Mo(){let{getCurrentStoryData:e}=N();return e()}function Do(){let e=Mo();return(e==null?void 0:e.type)==="story"&&e.argTypes||{}}0&&(module.exports={ActiveTabs,Consumer,ManagerContext,Provider,combineParameters,merge,useAddonState,useArgTypes,useArgs,useChannel,useGlobalTypes,useGlobals,useParameter,useSharedState,useStoryPrepared,useStorybookApi,useStorybookState});
