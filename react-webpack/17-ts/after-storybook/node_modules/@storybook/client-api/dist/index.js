var tr=Object.create;var P=Object.defineProperty;var er=Object.getOwnPropertyDescriptor;var or=Object.getOwnPropertyNames;var ar=Object.getPrototypeOf,sr=Object.prototype.hasOwnProperty;var nr=(t,r)=>{for(var e in r)P(t,e,{get:r[e],enumerable:!0})},I=(t,r,e,c)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of or(r))!sr.call(t,n)&&n!==e&&P(t,n,{get:()=>r[n],enumerable:!(c=er(r,n))||c.enumerable});return t},k=(t,r,e)=>(I(t,r,"default"),e&&I(e,r,"default")),j=(t,r,e)=>(e=t!=null?tr(ar(t)):{},I(r||!t||!t.__esModule?P(e,"default",{value:t,enumerable:!0}):e,t)),ir=t=>I(P({},"__esModule",{value:!0}),t);var F={};nr(F,{ClientApi:()=>G,addArgTypes:()=>W,addArgTypesEnhancer:()=>H,addArgs:()=>U,addArgsEnhancer:()=>B,addDecorator:()=>Y,addLoader:()=>Q,addParameters:()=>K,addStepRunner:()=>J,getQueryParam:()=>mr,getQueryParams:()=>rr,setGlobalRender:()=>q});module.exports=ir(F);var z=require("ts-dedent"),V=j(require("global")),M=require("@storybook/client-logger"),C=require("@storybook/csf"),g=require("@storybook/store");var v=j(require("global")),D=require("ts-dedent"),L=require("synchronous-promise"),h=require("@storybook/csf"),O=require("@storybook/store"),N=require("@storybook/client-logger"),_=j(require("util-deprecate")),dr=(0,_.default)(()=>{},"You cannot use `.mdx` files without using `storyStoreV7`. Consider upgrading to the new store."),R=class{constructor(){this.projectAnnotations={loaders:[],decorators:[],parameters:{},argsEnhancers:[],argTypesEnhancers:[],args:{},argTypes:{}},this.entries={},this.csfExports={}}importFn(r){return L.SynchronousPromise.resolve().then(()=>{let e=this.csfExports[r];if(!e)throw new Error(`Unknown path: ${r}`);return e})}getStoryIndex(r){var p,f;let e=Object.keys(this.csfExports),c=(f=(p=this.projectAnnotations.parameters)==null?void 0:p.options)==null?void 0:f.storySort,u=Object.entries(this.entries).map(([o,{type:i,importPath:s,...d}])=>{let A=this.csfExports[s],S=r.processCSFFileWithCache(A,s,A.default.title),w;return i==="story"?w=r.storyFromCSFFile({storyId:o,csfFile:S}):w={...d,story:d.name,kind:d.title,componentId:(0,h.toId)(d.componentId||d.title),parameters:{fileName:s}},[o,w,S.meta.parameters,this.projectAnnotations.parameters]}),m;try{m=(0,O.sortStoriesV6)(u,c,e)}catch(o){throw typeof c=="function"?new Error(D.dedent`
          Error sorting stories with sort parameter ${c}:

          > ${o.message}
          
          Are you using a V7-style sort function in V6 compatibility mode?
          
          More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort
        `):o}let a=m.reduce((o,i)=>(o[i.id]=this.entries[i.id],o),{});return{v:4,entries:a}}clearFilenameExports(r){!this.csfExports[r]||(Object.entries(this.entries).forEach(([e,{importPath:c}])=>{c===r&&delete this.entries[e]}),this.csfExports[r]={})}addStoriesFromExports(r,e){if(r.match(/\.mdx$/)&&!r.match(/\.stories\.mdx$/)){dr();return}if(this.csfExports[r]===e)return;this.clearFilenameExports(r);let{default:c,__namedExportsOrder:n,...u}=e,{id:m,title:a}=c||{},p=(v.default.STORIES||[]).map(s=>({...s,importPathMatcher:new RegExp(s.importPathMatcher)}));if(a=(0,O.userOrAutoTitle)(r,p,a),!a){N.logger.info(`Unexpected default export without title in '${r}': ${JSON.stringify(e.default)}`);return}this.csfExports[r]={...e,default:{...c,title:a}};let f=u;Array.isArray(n)&&(f={},n.forEach(s=>{let d=u[s];d&&(f[s]=d)}));let o=v.default.DOCS_OPTIONS||{},i=new Set;Object.entries(f).filter(([s])=>(0,h.isExportStory)(s,c)).forEach(([s,d])=>{var E,b;let A=(0,h.storyNameFromExport)(s),S=((E=d.parameters)==null?void 0:E.__id)||(0,h.toId)(m||a,A),w=typeof d!="function"&&d.name||d.storyName||((b=d.story)==null?void 0:b.name)||A;if(!i.has(a)&&o.docsPage){let x=o.defaultName,T=(0,h.toId)(m||a,x);i.add(a),this.entries[T]={type:"docs",standalone:!1,id:T,title:a,name:x,importPath:r,storiesImports:[],componentId:m}}this.entries[S]={type:"story",id:S,name:w,title:a,importPath:r,componentId:m}})}};var y,cr={addDecorator:"Instead, use `export const decorators = [];` in your `preview.js`.",addParameters:"Instead, use `export const parameters = {};` in your `preview.js`.",addLoader:"Instead, use `export const loaders = [];` in your `preview.js`.",addArgs:"",addArgTypes:"",addArgsEnhancer:"",addArgTypesEnhancer:"",addStepRunner:"",getGlobalRender:"",setGlobalRender:""},l=t=>{var r;if((r=V.default.FEATURES)!=null&&r.storyStoreV7)throw new Error(z.dedent`You cannot use \`${t}\` with the new Story Store.

      ${cr[t]}`);if(!y)throw new Error(`Singleton client API not yet initialized, cannot call \`${t}\`.`)},Y=t=>{l("addDecorator"),y.addDecorator(t)},K=t=>{l("addParameters"),y.addParameters(t)},Q=t=>{l("addLoader"),y.addLoader(t)},U=t=>{l("addArgs"),y.addArgs(t)},W=t=>{l("addArgTypes"),y.addArgTypes(t)},B=t=>{l("addArgsEnhancer"),y.addArgsEnhancer(t)},H=t=>{l("addArgTypesEnhancer"),y.addArgTypesEnhancer(t)},J=t=>{l("addStepRunner"),y.addStepRunner(t)};var q=t=>{l("setGlobalRender"),y.facade.projectAnnotations.render=t},pr=new Set(["string","number","boolean","symbol"]),G=class{constructor({storyStore:r}={}){this.lastFileName=0;this.addDecorator=r=>{this.facade.projectAnnotations.decorators.push(r)};this.addParameters=({globals:r,globalTypes:e,...c})=>{this.facade.projectAnnotations.parameters=(0,g.combineParameters)(this.facade.projectAnnotations.parameters,c),r&&(this.facade.projectAnnotations.globals={...this.facade.projectAnnotations.globals,...r}),e&&(this.facade.projectAnnotations.globalTypes={...this.facade.projectAnnotations.globalTypes,...(0,g.normalizeInputTypes)(e)})};this.addStepRunner=r=>{this.facade.projectAnnotations.runStep=(0,g.composeStepRunners)([this.facade.projectAnnotations.runStep,r].filter(Boolean))};this.addLoader=r=>{this.facade.projectAnnotations.loaders.push(r)};this.addArgs=r=>{this.facade.projectAnnotations.args={...this.facade.projectAnnotations.args,...r}};this.addArgTypes=r=>{this.facade.projectAnnotations.argTypes={...this.facade.projectAnnotations.argTypes,...(0,g.normalizeInputTypes)(r)}};this.addArgsEnhancer=r=>{this.facade.projectAnnotations.argsEnhancers.push(r)};this.addArgTypesEnhancer=r=>{this.facade.projectAnnotations.argTypesEnhancers.push(r)};this.storiesOf=(r,e)=>{if(!r&&typeof r!="string")throw new Error("Invalid or missing kind provided for stories, should be a string");if(e||M.logger.warn(`Missing 'module' parameter for story with a kind of '${r}'. It will break your HMR`),e){let o=Object.getPrototypeOf(e);o.exports&&o.exports.default&&M.logger.error(`Illegal mix of CSF default export and storiesOf calls in a single file: ${o.i}`)}let c=e&&e.id?`${e.id}`:(this.lastFileName++).toString(),n=c,u=1;for(;this.facade.csfExports[n]&&Object.keys(this.facade.csfExports[n]).length>0;)u+=1,n=`${c}-${u}`;e&&e.hot&&e.hot.accept&&(e.hot.accept(),e.hot.dispose(()=>{this.facade.clearFilenameExports(n),setTimeout(()=>{var o;(o=this.onImportFnChanged)==null||o.call(this,{importFn:this.importFn.bind(this)})},0)}));let m=!1,a={kind:r.toString(),add:()=>a,addDecorator:()=>a,addLoader:()=>a,addParameters:()=>a};Object.keys(this.addons).forEach(o=>{let i=this.addons[o];a[o]=(...s)=>(i.apply(a,s),a)});let p={id:(0,C.sanitize)(r),title:r,decorators:[],loaders:[],parameters:{}};this.facade.csfExports[n]={default:p};let f=0;return a.add=(o,i,s={})=>{if(m=!0,typeof o!="string")throw new Error(`Invalid or missing storyName provided for a "${r}" story.`);if(!i||Array.isArray(i)||pr.has(typeof i))throw new Error(`Cannot load story "${o}" in "${r}" due to invalid format. Storybook expected a function/object but received ${typeof i} instead.`);let{decorators:d,loaders:A,component:S,args:w,argTypes:E,...b}=s,x=s.__id||(0,C.toId)(r,o),T=this.facade.csfExports[n];return T[`story${f}`]={name:o,parameters:{fileName:n,__id:x,...b},decorators:d,loaders:A,args:w,argTypes:E,component:S,render:i},f+=1,this.facade.entries[x]={id:x,title:T.default.title,name:o,importPath:n,type:"story"},a},a.addDecorator=o=>{if(m)throw new Error(`You cannot add a decorator after the first story for a kind.
Read more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories`);return p.decorators.push(o),a},a.addLoader=o=>{if(m)throw new Error("You cannot add a loader after the first story for a kind.");return p.loaders.push(o),a},a.addParameters=({component:o,args:i,argTypes:s,...d})=>{if(m)throw new Error(`You cannot add parameters after the first story for a kind.
Read more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories`);return p.parameters=(0,g.combineParameters)(p.parameters,d),o&&(p.component=o),i&&(p.args={...p.args,...i}),s&&(p.argTypes={...p.argTypes,...s}),a},a};this.raw=()=>this.storyStore.raw();this.facade=new R,this.addons={},this.storyStore=r,y=this}importFn(r){return this.facade.importFn(r)}getStoryIndex(){if(!this.storyStore)throw new Error("Cannot get story index before setting storyStore");return this.facade.getStoryIndex(this.storyStore)}get _storyStore(){return this.storyStore}};var X=j(require("global")),Z=require("qs"),{document:$}=X.default,rr=()=>$&&$.location&&$.location.search?(0,Z.parse)($.location.search,{ignoreQueryPrefix:!0}):{},mr=t=>rr()[t];k(F,require("@storybook/store"),module.exports);0&&(module.exports={ClientApi,addArgTypes,addArgTypesEnhancer,addArgs,addArgsEnhancer,addDecorator,addLoader,addParameters,addStepRunner,getQueryParam,getQueryParams,setGlobalRender});
