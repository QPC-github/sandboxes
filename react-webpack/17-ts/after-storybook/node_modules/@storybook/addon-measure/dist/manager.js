var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));

// src/manager.tsx
var import_react2 = __toESM(require("react"));
var import_addons = require("@storybook/addons");

// src/constants.ts
var ADDON_ID = "storybook/measure-addon";
var TOOL_ID = `${ADDON_ID}/tool`;
var EVENTS = {
  RESULT: `${ADDON_ID}/result`,
  REQUEST: `${ADDON_ID}/request`,
  CLEAR: `${ADDON_ID}/clear`
};

// src/Tool.tsx
var import_react = __toESM(require("react"));
var import_api = require("@storybook/api");
var import_components = require("@storybook/components");
var Tool = () => {
  const [globals, updateGlobals] = (0, import_api.useGlobals)();
  const { measureEnabled } = globals;
  const api = (0, import_api.useStorybookApi)();
  const toggleMeasure = (0, import_react.useCallback)(
    () => updateGlobals({
      measureEnabled: !measureEnabled
    }),
    [updateGlobals, measureEnabled]
  );
  (0, import_react.useEffect)(() => {
    api.setAddonShortcut(ADDON_ID, {
      label: "Toggle Measure [M]",
      defaultShortcut: ["M"],
      actionName: "measure",
      showInMenu: false,
      action: toggleMeasure
    });
  }, [toggleMeasure, api]);
  return /* @__PURE__ */ import_react.default.createElement(import_components.IconButton, {
    key: TOOL_ID,
    active: measureEnabled,
    title: "Enable measure",
    onClick: toggleMeasure
  }, /* @__PURE__ */ import_react.default.createElement(import_components.Icons, {
    icon: "ruler"
  }));
};

// src/manager.tsx
import_addons.addons.register(ADDON_ID, () => {
  import_addons.addons.add(TOOL_ID, {
    type: import_addons.types.TOOL,
    title: "Measure",
    match: ({ viewMode }) => viewMode === "story",
    render: () => /* @__PURE__ */ import_react2.default.createElement(Tool, null)
  });
});
